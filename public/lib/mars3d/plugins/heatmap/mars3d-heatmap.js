/**
 * Mars3D平台插件,结合heatmap可视化功能插件  mars3d-heatmap
 *
 * 版本信息：v3.5.1
 * 编译日期：2023-03-29 10:02:50
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.mars3d || require('mars3d')), (window.h337 || require('@mars3d/heatmap.js'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'mars3d', '@mars3d/heatmap.js'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-heatmap"] = {}, global.mars3d, global.h337));
})(this, (function (exports, mars3d, h337) { 
'use strict';var _0x4849f9=_0x48f4;(function(_0x28b01f,_0x57319e){var _0x3164de={_0x4ed408:0x102,_0x2ae46b:0x13c,_0x3f6028:0x145,_0x4d25ad:0x147,_0x489032:0x101},_0x4639fc=_0x48f4,_0x2d4cf4=_0x28b01f();while(!![]){try{var _0x29fc2b=-parseInt(_0x4639fc(_0x3164de._0x4ed408))/0x1*(parseInt(_0x4639fc(_0x3164de._0x2ae46b))/0x2)+parseInt(_0x4639fc(0x15d))/0x3+-parseInt(_0x4639fc(_0x3164de._0x3f6028))/0x4+-parseInt(_0x4639fc(0x14d))/0x5*(-parseInt(_0x4639fc(0x119))/0x6)+-parseInt(_0x4639fc(_0x3164de._0x4d25ad))/0x7*(parseInt(_0x4639fc(_0x3164de._0x489032))/0x8)+-parseInt(_0x4639fc(0x15f))/0x9+parseInt(_0x4639fc(0x149))/0xa;if(_0x29fc2b===_0x57319e)break;else _0x2d4cf4['push'](_0x2d4cf4['shift']());}catch(_0x430176){_0x2d4cf4['push'](_0x2d4cf4['shift']());}}}(_0x408f,0xaf78c));function _interopNamespace(_0x1de739){if(_0x1de739&&_0x1de739['__esModule'])return _0x1de739;var _0x3dcb7d=Object['create'](null);return _0x1de739&&Object['keys'](_0x1de739)['forEach'](function(_0x2f06f5){if(_0x2f06f5!=='default'){var _0x5c764b=Object['getOwnPropertyDescriptor'](_0x1de739,_0x2f06f5);Object['defineProperty'](_0x3dcb7d,_0x2f06f5,_0x5c764b['get']?_0x5c764b:{'enumerable':!![],'get':function(){return _0x1de739[_0x2f06f5];}});}}),_0x3dcb7d['default']=_0x1de739,_0x3dcb7d;}var mars3d__namespace=_interopNamespace(mars3d),h337__namespace=_interopNamespace(h337);function ownKeys(_0x2672d9,_0x238a66){var _0xb6ffa3={_0x4bdf85:0x126},_0x24b39c={_0x3f4776:0x15a},_0x17daf3=_0x48f4,_0x25b1e9=Object[_0x17daf3(_0xb6ffa3._0x4bdf85)](_0x2672d9);if(Object[_0x17daf3(0x134)]){var _0x413398=Object['getOwnPropertySymbols'](_0x2672d9);_0x238a66&&(_0x413398=_0x413398['filter'](function(_0x5eef6e){var _0x407632=_0x17daf3;return Object[_0x407632(_0x24b39c._0x3f4776)](_0x2672d9,_0x5eef6e)['enumerable'];})),_0x25b1e9['push']['apply'](_0x25b1e9,_0x413398);}return _0x25b1e9;}function _objectSpread2(_0x4e65b2){var _0x2b7e77={_0xb7222c:0x15a};for(var _0xe806fa=0x1;_0xe806fa<arguments['length'];_0xe806fa++){var _0x148234=null!=arguments[_0xe806fa]?arguments[_0xe806fa]:{};_0xe806fa%0x2?ownKeys(Object(_0x148234),!0x0)['forEach'](function(_0x3ca3e2){_defineProperty(_0x4e65b2,_0x3ca3e2,_0x148234[_0x3ca3e2]);}):Object['getOwnPropertyDescriptors']?Object['defineProperties'](_0x4e65b2,Object['getOwnPropertyDescriptors'](_0x148234)):ownKeys(Object(_0x148234))['forEach'](function(_0x2d52e7){var _0x4e1e02=_0x48f4;Object['defineProperty'](_0x4e65b2,_0x2d52e7,Object[_0x4e1e02(_0x2b7e77._0xb7222c)](_0x148234,_0x2d52e7));});}return _0x4e65b2;}function _classCallCheck(_0xd6f36c,_0x6217c6){var _0x53c207=_0x48f4;if(!(_0xd6f36c instanceof _0x6217c6))throw new TypeError(_0x53c207(0x140));}function _defineProperties(_0x3f5030,_0x5a6706){var _0x4f3ea6=_0x48f4;for(var _0x33fe04=0x0;_0x33fe04<_0x5a6706['length'];_0x33fe04++){var _0x3e46c2=_0x5a6706[_0x33fe04];_0x3e46c2['enumerable']=_0x3e46c2['enumerable']||![],_0x3e46c2[_0x4f3ea6(0x111)]=!![];if('value'in _0x3e46c2)_0x3e46c2['writable']=!![];Object['defineProperty'](_0x3f5030,_0x3e46c2['key'],_0x3e46c2);}}function _createClass(_0xca5329,_0x1097a0,_0x5baed0){if(_0x1097a0)_defineProperties(_0xca5329['prototype'],_0x1097a0);if(_0x5baed0)_defineProperties(_0xca5329,_0x5baed0);return Object['defineProperty'](_0xca5329,'prototype',{'writable':![]}),_0xca5329;}function _defineProperty(_0x7e9792,_0xfd0628,_0x1b2ef4){var _0x388261={_0x2c28ac:0x138},_0x4795cf=_0x48f4;return _0xfd0628 in _0x7e9792?Object[_0x4795cf(_0x388261._0x2c28ac)](_0x7e9792,_0xfd0628,{'value':_0x1b2ef4,'enumerable':!![],'configurable':!![],'writable':!![]}):_0x7e9792[_0xfd0628]=_0x1b2ef4,_0x7e9792;}function _inherits(_0x476d8c,_0x424511){var _0x1c6138={_0x529d62:0x100,_0x6a6fe9:0x159,_0x2a0e47:0x113},_0x1eebb9=_0x48f4;if(typeof _0x424511!==_0x1eebb9(0x14a)&&_0x424511!==null)throw new TypeError(_0x1eebb9(_0x1c6138._0x529d62));_0x476d8c['prototype']=Object[_0x1eebb9(_0x1c6138._0x6a6fe9)](_0x424511&&_0x424511['prototype'],{'constructor':{'value':_0x476d8c,'writable':!![],'configurable':!![]}}),Object['defineProperty'](_0x476d8c,_0x1eebb9(_0x1c6138._0x2a0e47),{'writable':![]});if(_0x424511)_setPrototypeOf(_0x476d8c,_0x424511);}function _getPrototypeOf(_0x5a55c0){return _getPrototypeOf=Object['setPrototypeOf']?Object['getPrototypeOf']:function _0x3983cd(_0x362ae0){var _0x50f44f=_0x48f4;return _0x362ae0['__proto__']||Object[_0x50f44f(0x153)](_0x362ae0);},_getPrototypeOf(_0x5a55c0);}function _setPrototypeOf(_0x2604f1,_0x12583c){return _setPrototypeOf=Object['setPrototypeOf']||function _0x200248(_0x19e886,_0x577f36){return _0x19e886['__proto__']=_0x577f36,_0x19e886;},_setPrototypeOf(_0x2604f1,_0x12583c);}function _isNativeReflectConstruct(){var _0x1cf485={_0xaddf49:0x14a},_0x15790f=_0x48f4;if(typeof Reflect==='undefined'||!Reflect[_0x15790f(0x122)])return![];if(Reflect['construct']['sham'])return![];if(typeof Proxy===_0x15790f(_0x1cf485._0xaddf49))return!![];try{return Boolean['prototype'][_0x15790f(0x108)]['call'](Reflect['construct'](Boolean,[],function(){})),!![];}catch(_0x3b2385){return![];}}function _assertThisInitialized(_0x6ef02c){if(_0x6ef02c===void 0x0)throw new ReferenceError('this\x20hasn\x27t\x20been\x20initialised\x20-\x20super()\x20hasn\x27t\x20been\x20called');return _0x6ef02c;}function _possibleConstructorReturn(_0x58e9a1,_0x5e4666){if(_0x5e4666&&(typeof _0x5e4666==='object'||typeof _0x5e4666==='function'))return _0x5e4666;else{if(_0x5e4666!==void 0x0)throw new TypeError('Derived\x20constructors\x20may\x20only\x20return\x20object\x20or\x20undefined');}return _assertThisInitialized(_0x58e9a1);}function _createSuper(_0x11676c){var _0x13016c={_0x1284bd:0x104},_0x2a3c2a=_isNativeReflectConstruct();return function _0x2f0561(){var _0x24e750=_0x48f4,_0x2d98e7=_getPrototypeOf(_0x11676c),_0x37f2fb;if(_0x2a3c2a){var _0x53ea56=_getPrototypeOf(this)[_0x24e750(_0x13016c._0x1284bd)];_0x37f2fb=Reflect['construct'](_0x2d98e7,arguments,_0x53ea56);}else _0x37f2fb=_0x2d98e7['apply'](this,arguments);return _possibleConstructorReturn(this,_0x37f2fb);};}var HeatMaterial='uniform\x20sampler2D\x20image;\x0a\x0aczm_material\x20czm_getMaterial(czm_materialInput\x20materialInput)\x20{\x0a\x20\x20czm_material\x20material\x20=\x20czm_getDefaultMaterial(materialInput);\x0a\x20\x20vec2\x20st\x20=\x20materialInput.st;\x0a\x20\x20vec4\x20colorImage\x20=\x20texture(image,\x20st);\x0a\x20\x20if(colorImage.rgb\x20==\x20vec3(1.0)\x20||\x20colorImage.rgb\x20==\x20vec3(0.0))\x20{\x0a\x20\x20\x20\x20discard;\x0a\x20\x20}\x0a\x20\x20material.diffuse\x20=\x20colorImage.rgb;\x0a\x20\x20material.alpha\x20=\x20colorImage.a;\x0a\x20\x20return\x20material;\x0a}\x0a';if(!h337__namespace['create'])throw new Error('请引入\x20heatmap.js\x20库\x20');var Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x4849f9(0x15c)]['BaseLayer'],DEF_HEATSTYLE={'maxOpacity':0.8,'minOpacity':0.1,'blur':0.85,'radius':0x19,'gradient':{0.4:'blue',0.6:'green',0.8:'yellow',0.9:'red'}},DEF_STYLE={'arcRadiusScale':1.5,'arcBlurScale':1.5,'vertexFormat':Cesium[_0x4849f9(0x121)]['VERTEX_FORMAT']},HeatLayer=function(_0x1736a0){var _0x176dec={_0x18c1a9:0x11c,_0x121ba8:0x135,_0x166025:0x161},_0x1793d1={_0x5dbcfe:0x152,_0x3de17a:0x155,_0x2e9cab:0x10a,_0x493607:0x142},_0x543558={_0x9c3608:0x127,_0x14c2a3:0x164,_0x102489:0x12a},_0x288c05={_0x45de94:0x115,_0x411e84:0x105,_0xc545b4:0x106,_0x54b795:0x109,_0x2b06ac:0x11a,_0x1bcd69:0x154,_0x2250f5:0x105,_0x4e8ed2:0x105,_0x45d587:0x132,_0x6caee7:0x152,_0x5dffd1:0x159},_0x1bf114={_0x14744d:0x118,_0x49bbb5:0x12f},_0x29dd49={_0xd3d29a:0x132},_0x27ad38={_0x2279ab:0x136,_0x3c0acc:0x131,_0x4bd6a7:0x13b,_0x4a2489:0x15b,_0x27e557:0xfc,_0x5050c4:0x137,_0x167327:0x121,_0x465623:0x13f,_0x2e4b72:0x14b,_0x46c5f7:0xfd},_0x465249={_0xad309a:0x132},_0xd4e7f4={_0x16b0e2:0x14e,_0x3357bc:0x114,_0x58cc34:0x141,_0x5d65b4:0x13f,_0x516c9a:0x10b,_0x367c8c:0x125,_0x27496f:0xfd,_0x5c15f9:0x11d,_0x25e12c:0x10b,_0x528952:0x10b,_0x2d3ee6:0x13f},_0xe1d7bf={_0xa9144a:0x124,_0x19a27c:0x162,_0x1b516e:0x130},_0x201d88={_0x5455cf:0x11e,_0x2039ae:0x14e},_0x389879={_0x2f49ca:0x156,_0x35e114:0x15c},_0x353151={_0x4a66ae:0x14e},_0x2a77d2={_0x42b8f4:0x115},_0x156fe2={_0x53b7a8:0x148,_0x5ae417:0x117},_0xa31690={_0x1997d7:0x12c,_0xa6dba0:0x107},_0x2d6cb4={_0x38de6e:0x12c},_0x3b0299={_0x476afa:0x105,_0x5399ae:0x13d,_0x208497:0x112},_0x23d508=_0x4849f9;_inherits(_0x3e9f8c,_0x1736a0);var _0x34d29a=_createSuper(_0x3e9f8c);function _0x3e9f8c(){var _0x7c7b8b=_0x48f4,_0x54e6b4,_0x23ee0b,_0x3629d5,_0x5c4696=arguments[_0x7c7b8b(0x129)]>0x0&&arguments[0x0]!==undefined?arguments[0x0]:{};return _classCallCheck(this,_0x3e9f8c),_0x3629d5=_0x34d29a['call'](this,_0x5c4696),_0x3629d5[_0x7c7b8b(_0x3b0299._0x476afa)][_0x7c7b8b(_0x3b0299._0x5399ae)]=(_0x54e6b4=_0x3629d5['options'][_0x7c7b8b(0x13d)])!==null&&_0x54e6b4!==void 0x0?_0x54e6b4:document['body']['clientWidth'],_0x3629d5[_0x7c7b8b(_0x3b0299._0x476afa)]['maxCanvasSize']=Math[_0x7c7b8b(_0x3b0299._0x208497)](_0x3629d5['options']['maxCanvasSize'],0x1388),_0x3629d5['options']['minCanvasSize']=(_0x23ee0b=_0x3629d5['options']['minCanvasSize'])!==null&&_0x23ee0b!==void 0x0?_0x23ee0b:document['body']['clientHeight'],_0x3629d5['options']['minCanvasSize']=Math['max'](_0x3629d5['options']['minCanvasSize'],0x2bc),_0x3629d5['options']['heatStyle']=_objectSpread2(_objectSpread2({},DEF_HEATSTYLE),_0x3629d5['options']['heatStyle']||{}),_0x3629d5['options']['style']=_objectSpread2(_objectSpread2({},DEF_STYLE),_0x3629d5[_0x7c7b8b(0x105)]['style']||{}),_0x3629d5;}return _createClass(_0x3e9f8c,[{'key':'layer','get':function _0x4a0472(){return this['_layer'];}},{'key':'heatStyle','get':function _0x653f0e(){var _0x207b94=_0x48f4;return this[_0x207b94(0x105)][_0x207b94(_0x2d6cb4._0x38de6e)];},'set':function _0x30d7ef(_0xaae8a4){var _0x23c7d6=_0x48f4;this['options'][_0x23c7d6(_0xa31690._0x1997d7)]=mars3d__namespace['Util'][_0x23c7d6(0x117)](this['options']['heatStyle'],_0xaae8a4),this['_heat']&&(this[_0x23c7d6(_0xa31690._0xa6dba0)]['configure'](this['options'][_0x23c7d6(0x12c)]),this['_updatePositionsHook'](!![]));}},{'key':'style','get':function _0x6c29b2(){var _0x50d1e4=_0x48f4;return this['options'][_0x50d1e4(0x148)];},'set':function _0x81bf3f(_0x8d124e){var _0x26d927=_0x48f4;this['options'][_0x26d927(_0x156fe2._0x53b7a8)]=mars3d__namespace['Util'][_0x26d927(_0x156fe2._0x5ae417)](this['options']['style'],_0x8d124e);}},{'key':'positions','get':function _0x55ef0e(){var _0xd78ae0=_0x48f4;return this[_0xd78ae0(0x13a)];},'set':function _0x1aa899(_0x537735){var _0x282dcc=_0x48f4;this[_0x282dcc(0x123)](_0x537735);}},{'key':_0x23d508(_0x176dec._0x18c1a9),'get':function _0x5779e6(){var _0x274a9b=_0x23d508,_0x523ca5=[];return this[_0x274a9b(0x143)][_0x274a9b(_0x2a77d2._0x42b8f4)](function(_0x16a3de){_0x523ca5['push'](_0x16a3de['toArray']());}),_0x523ca5;}},{'key':'rectangle','get':function _0x375873(){var _0x20be54=_0x23d508;return this[_0x20be54(0x132)];}},{'key':'_setOptionsHook','value':function _0x4403e7(_0x2726b1,_0x59b3c0){var _0x3fe144=_0x23d508;_0x2726b1['positions']&&(this[_0x3fe144(_0x353151._0x4a66ae)]=_0x2726b1['positions']);}},{'key':'_mountedHook','value':function _0x28bdbc(){var _0x364a91=_0x23d508;this['style'][_0x364a91(_0x389879._0x2f49ca)]===_0x364a91(0x114)?this['_layer']=new mars3d__namespace[(_0x364a91(_0x389879._0x35e114))][(_0x364a91(0x10f))]({'crs':'EPSG:3857','private':!![]}):this['_layer']=new mars3d__namespace[(_0x364a91(0x15c))][(_0x364a91(0x157))]({'private':!![]});}},{'key':'_addedHook','value':function _0xaa9321(){var _0x34fce0=_0x23d508;this[_0x34fce0(_0x201d88._0x5455cf)]['addLayer'](this['_layer']),this[_0x34fce0(0x105)]['positions']&&(this[_0x34fce0(_0x201d88._0x2039ae)]=this['options']['positions']),this[_0x34fce0(0x105)]['flyTo']&&this[_0x34fce0(0x160)]();}},{'key':_0x23d508(_0x176dec._0x121ba8),'value':function _0x1b97b0(){var _0x53295c=_0x23d508;this['heatStyle'][_0x53295c(_0xe1d7bf._0xa9144a)]&&(mars3d__namespace['DomUtil']['remove'](this['heatStyle']['container']),delete this[_0x53295c(0x12c)]['container']),this['clear'](),this[_0x53295c(0x11e)][_0x53295c(_0xe1d7bf._0x19a27c)](this[_0x53295c(_0xe1d7bf._0x1b516e)]);}},{'key':_0x23d508(0x139),'value':function _0x1e61be(_0x3d869d,_0x4abef9){this['_positions']=this['_positions']||[],this['_positions']['push'](_0x3d869d),this['_updatePositionsHook'](_0x4abef9);}},{'key':'setPositions','value':function _0x3f72e4(_0x48962d,_0x44f0fb){var _0x54c115=_0x23d508;this['_positions']=_0x48962d,this[_0x54c115(0x10c)](_0x44f0fb);}},{'key':'clear','value':function _0x1e31ef(){var _0x2108b4=_0x23d508;this['_graphic']&&(this['_layer'][_0x2108b4(0x14c)](this['_graphic'],!![]),delete this['_graphic']),this['_graphic2']&&(this['_layer'][_0x2108b4(0x14c)](this['_graphic2'],!![]),delete this['_graphic2']);}},{'key':'_updatePositionsHook','value':function _0xb7520d(_0x3ac655){var _0x4a824e=_0x23d508;if(!this['show']||!this['_map']||!this[_0x4a824e(_0xd4e7f4._0x16b0e2)]||this['positions'][_0x4a824e(0x129)]===0x0)return this;var _0x4cc9e9=this['_getHeatCanvas']();if(this['style']['type']===_0x4a824e(_0xd4e7f4._0x3357bc))this['_layer']['setOptions']({'url':_0x4cc9e9['toDataURL']('image/png'),'rectangle':this[_0x4a824e(0x132)],'opacity':this['style'][_0x4a824e(_0xd4e7f4._0x58cc34)]});else this[_0x4a824e(0x148)]['arc']?this[_0x4a824e(_0xd4e7f4._0x5d65b4)]&&_0x3ac655?(this['_graphic'][_0x4a824e(0x11d)]['image']=_0x4cc9e9,this[_0x4a824e(0x13f)]['uniforms'][_0x4a824e(_0xd4e7f4._0x516c9a)]=this[_0x4a824e(_0xd4e7f4._0x367c8c)](),this[_0x4a824e(_0xd4e7f4._0x27496f)]&&(this['_graphic2'][_0x4a824e(_0xd4e7f4._0x5c15f9)]['image']=_0x4cc9e9,this[_0x4a824e(_0xd4e7f4._0x27496f)]['uniforms'][_0x4a824e(_0xd4e7f4._0x25e12c)]=this['_graphic'][_0x4a824e(_0xd4e7f4._0x5c15f9)][_0x4a824e(_0xd4e7f4._0x528952)])):this['_createArcGraphic'](_0x4cc9e9):this[_0x4a824e(0x13f)]&&_0x3ac655?this[_0x4a824e(_0xd4e7f4._0x2d3ee6)][_0x4a824e(0x11d)]['image']=_0x4cc9e9:this[_0x4a824e(0x13e)](_0x4cc9e9);return this;}},{'key':_0x23d508(0x13e),'value':function _0x1d39c3(_0x17cb3d){var _0x72226e=_0x23d508;this['clear'](),this['_graphic']=new mars3d__namespace['graphic']['RectanglePrimitive'](_objectSpread2(_objectSpread2({},this['options']),{},{'rectangle':this[_0x72226e(_0x465249._0xad309a)],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'material':new Cesium['Material']({'fabric':{'uniforms':{'image':_0x17cb3d},'source':HeatMaterial},'translucent':!![]}),'flat':!![]})})),this['_layer']['addGraphic'](this['_graphic']);}},{'key':'_createArcGraphic','value':function _0x407f0d(_0x593878){var _0x4d8ec0=_0x23d508,_0x746a61;this[_0x4d8ec0(0x144)]();var _0x1f9e46=Cesium['RenderState']['fromCache']({'cull':{'enabled':!![]},'depthTest':{'enabled':!![]},'stencilTest':{'enabled':!![],'frontFunction':Cesium['StencilFunction'][_0x4d8ec0(_0x27ad38._0x2279ab)],'frontOperation':{'fail':Cesium['StencilOperation'][_0x4d8ec0(0x15b)],'zFail':Cesium[_0x4d8ec0(0x133)]['KEEP'],'zPass':Cesium['StencilOperation'][_0x4d8ec0(_0x27ad38._0x3c0acc)]},'backFunction':Cesium[_0x4d8ec0(_0x27ad38._0x4bd6a7)]['ALWAYS'],'backOperation':{'fail':Cesium['StencilOperation']['KEEP'],'zFail':Cesium['StencilOperation'][_0x4d8ec0(_0x27ad38._0x4a2489)],'zPass':Cesium['StencilOperation'][_0x4d8ec0(_0x27ad38._0x3c0acc)]},'reference':0x2,'mask':0x2},'blending':Cesium['BlendingState'][_0x4d8ec0(_0x27ad38._0x27e557)]}),_0x13ac2f=Math['floor']((_0x746a61=this[_0x4d8ec0(0x148)]['diffHeight'])!==null&&_0x746a61!==void 0x0?_0x746a61:this[_0x4d8ec0(0x11a)]*0.02)+0.1;this['style'][_0x4d8ec0(0x116)]&&delete this[_0x4d8ec0(0x148)]['diffHeight'];var _0x5285f5=(this['style'][_0x4d8ec0(0x128)],0x64),_0x4c1081=Math['max'](this['_rectangle'][_0x4d8ec0(_0x27ad38._0x5050c4)],this['_rectangle']['width']);this['style']['granularity']=_0x4c1081/=_0x5285f5;var _0x150b9c=new Cesium['Material']({'fabric':{'uniforms':{'image':_0x593878,'repeat':new Cesium['Cartesian2'](0x1,0x1),'color':new Cesium['Color'](0x1,0x1,0x1,0x0),'bumpMap':this['_getArcHeatCanvas']()},'source':HeatMaterial},'translucent':!![]}),_0x3802d2=this[_0x4d8ec0(0x148)]['arcDirection']||0x1;this['_graphic']=new mars3d__namespace['graphic']['RectanglePrimitive'](_objectSpread2(_objectSpread2({},this['options']),{},{'rectangle':this['_rectangle'],'appearance':new Cesium[(_0x4d8ec0(_0x27ad38._0x167327))]({'flat':!![],'aboveGround':!![],'renderState':_0x1f9e46,'material':_0x150b9c,'vertexShaderSource':getVertexShaderSource(_0x13ac2f*_0x3802d2)})})),this['_layer']['addGraphic'](this[_0x4d8ec0(_0x27ad38._0x465623)]),this['style'][_0x4d8ec0(0x11f)]===0x0&&(this['_graphic2']=new mars3d__namespace['graphic']['RectanglePrimitive'](_objectSpread2(_objectSpread2({},this['options']),{},{'rectangle':this['_rectangle'],'appearance':new Cesium['EllipsoidSurfaceAppearance']({'flat':!![],'aboveGround':!![],'renderState':_0x1f9e46,'material':_0x150b9c,'vertexShaderSource':getVertexShaderSource(-_0x13ac2f)})})),this['_layer'][_0x4d8ec0(_0x27ad38._0x2e4b72)](this[_0x4d8ec0(_0x27ad38._0x46c5f7)]));}},{'key':_0x23d508(_0x176dec._0x166025),'value':function _0x5badba(_0x374c12){var _0x3b7c09=_0x23d508;return _0x374c12!==null&&_0x374c12!==void 0x0&&_0x374c12[_0x3b7c09(0x10e)]&&this['_rectangle']?mars3d__namespace['PolyUtil']['formatRectangle'](this[_0x3b7c09(_0x29dd49._0xd3d29a)]):this['_rectangle'];}},{'key':'_getHeatCanvas','value':function _0x55d36a(){var _0x30b623=_0x23d508,_0x48eb3b=this,_0x4e1f87,_0x2d98e0,_0x466aa0,_0xb37907,_0x303cae=this['_positions'],_0x73e619=[],_0x25fe3a,_0x5740d1,_0x4106ff,_0x3fbedf;_0x303cae[_0x30b623(_0x288c05._0x45de94)](function(_0x2d499e){var _0x4cd675=_0x30b623,_0x426ea0=mars3d__namespace[_0x4cd675(_0x1bf114._0x14744d)]['parse'](_0x2d499e);if(!_0x426ea0)return;_0x426ea0[_0x4cd675(0x12b)]=_0x2d499e['value']||0x1,!_0x48eb3b['options']['rectangle']&&(_0x25fe3a===undefined?(_0x25fe3a=_0x426ea0['lng'],_0x5740d1=_0x426ea0[_0x4cd675(_0x1bf114._0x49bbb5)],_0x4106ff=_0x426ea0['lat'],_0x3fbedf=_0x426ea0[_0x4cd675(0xff)]):(_0x25fe3a=Math['min'](_0x25fe3a,_0x426ea0['lng']),_0x5740d1=Math['max'](_0x5740d1,_0x426ea0['lng']),_0x4106ff=Math['min'](_0x4106ff,_0x426ea0['lat']),_0x3fbedf=Math['max'](_0x3fbedf,_0x426ea0['lat']))),_0x73e619['push'](_0x426ea0);});var _0x52538b=this[_0x30b623(_0x288c05._0x411e84)]['rectangle']||{'xmin':_0x25fe3a,'xmax':_0x5740d1,'ymin':_0x4106ff,'ymax':_0x3fbedf},_0x339fc8=getMercatorBounds(_0x52538b),_0x9edb2e=Math[_0x30b623(_0x288c05._0xc545b4)](_0x339fc8['xmax']-_0x339fc8['xmin']),_0x3bcc43=Math['abs'](_0x339fc8['ymax']-_0x339fc8[_0x30b623(_0x288c05._0x54b795)]),_0x2f1982=Math['max'](_0x9edb2e,_0x3bcc43),_0x5c9bf8=Math['min'](_0x9edb2e,_0x3bcc43);this[_0x30b623(_0x288c05._0x2b06ac)]=_0x2f1982;var _0x383014=0x1;if(_0x2f1982>this['options'][_0x30b623(0x13d)])_0x383014=_0x2f1982/this['options']['maxCanvasSize'],_0x5c9bf8/_0x383014<this['options']['minCanvasSize']&&(_0x383014=_0x5c9bf8/this['options']['minCanvasSize']);else _0x5c9bf8<this['options'][_0x30b623(_0x288c05._0x1bcd69)]&&(_0x383014=_0x5c9bf8/this[_0x30b623(_0x288c05._0x2250f5)]['minCanvasSize'],_0x2f1982/_0x383014>this[_0x30b623(_0x288c05._0x4e8ed2)]['maxCanvasSize']&&(_0x383014=_0x2f1982/this[_0x30b623(0x105)]['maxCanvasSize']));var _0x289223=this['heatStyle']['radius']*1.5,_0x2a0f79=_0x9edb2e/_0x383014+_0x289223*0x2,_0x38838e=_0x3bcc43/_0x383014+_0x289223*0x2,_0x507e80=_0x289223*_0x383014;_0x339fc8['xmin']-=_0x507e80,_0x339fc8['ymin']-=_0x507e80,_0x339fc8['xmax']+=_0x507e80,_0x339fc8[_0x30b623(0x10a)]+=_0x507e80,this['_scale']=_0x383014,_0x52538b=geLatLngBounds(_0x339fc8),this[_0x30b623(_0x288c05._0x45d587)]=Cesium['Rectangle']['fromDegrees'](_0x52538b[_0x30b623(_0x288c05._0x6caee7)],_0x52538b[_0x30b623(0x109)],_0x52538b['xmax'],_0x52538b['ymax']);var _0x27b338=(_0x4e1f87=_0x73e619[0x0][_0x30b623(0x12b)])!==null&&_0x4e1f87!==void 0x0?_0x4e1f87:0x1,_0x1ec373=(_0x2d98e0=_0x73e619[0x0]['value'])!==null&&_0x2d98e0!==void 0x0?_0x2d98e0:0x0,_0x518ed8=[];_0x73e619[_0x30b623(0x115)](function(_0x4900dc){var _0x80d573=_0x30b623,_0x5435c1=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x4900dc['lng'],_0x4900dc['lat']]),_0x30c963=_0x4900dc['value']||0x1,_0x4f106e=Math['round']((_0x5435c1[0x0]-_0x339fc8['xmin'])/_0x383014),_0x3fe479=Math['round']((_0x339fc8[_0x80d573(0x10a)]-_0x5435c1[0x1])/_0x383014);_0x27b338=Math[_0x80d573(0x14f)](_0x27b338,_0x30c963),_0x1ec373=Math['min'](_0x1ec373,_0x30c963),_0x518ed8['push']({'x':_0x4f106e,'y':_0x3fe479,'value':_0x30c963});});var _0x28416b={'min':(_0x466aa0=this[_0x30b623(0x105)]['min'])!==null&&_0x466aa0!==void 0x0?_0x466aa0:_0x1ec373,'max':(_0xb37907=this['options']['max'])!==null&&_0xb37907!==void 0x0?_0xb37907:_0x27b338,'data':_0x518ed8};this['_last_heatData']=_0x28416b;(!this['_last_mBounds']||_0x339fc8['xmin']!==this['_last_mBounds'][_0x30b623(0x152)]||_0x339fc8['ymin']!==this['_last_mBounds']['ymin']||_0x339fc8['xmax']!==this['_last_mBounds']['xmax']||_0x339fc8['ymax']!==this['_last_mBounds'][_0x30b623(0x10a)])&&(this['_last_mBounds']=_0x339fc8,!this['heatStyle']['container']&&(this['heatStyle']['container']=mars3d__namespace['DomUtil']['create'](_0x30b623(0x150),'mars3d-heatmap\x20mars3d-hideDiv',this['_map']['container'])),this['heatStyle']['container']['style']['cssText']='width:'['concat'](_0x2a0f79,_0x30b623(0x10d))['concat'](_0x38838e,'px;'),!this['_heat']?this['_heat']=h337__namespace[_0x30b623(_0x288c05._0x5dffd1)](this['heatStyle']):this['_heat']['configure'](this['heatStyle']));this['_heat']['setData'](_0x28416b);var _0x471e80=mars3d__namespace['DomUtil']['copyCanvas'](this['_heat']['_renderer'][_0x30b623(0x158)]);return _0x471e80;}},{'key':'_getArcHeatCanvas','value':function _0x27b571(){var _0x19dd48=_0x23d508;this['_heat'][_0x19dd48(0x11b)]({'radius':this['heatStyle']['radius']*this['style'][_0x19dd48(_0x543558._0x9c3608)],'blur':this[_0x19dd48(0x12c)]['blur']*this['style'][_0x19dd48(_0x543558._0x14c2a3)],'gradient':this['heatStyle']['gradientArc']||{0.25:'rgb(0,0,0)',0.55:'rgb(140,140,140)',0.85:_0x19dd48(_0x543558._0x102489),0x1:'rgb(255,255,255)'}});var _0x13dfaa=mars3d__namespace[_0x19dd48(0x110)]['copyCanvas'](this['_heat']['_renderer']['canvas']);return this['_heat'][_0x19dd48(0x11b)](this['options']['heatStyle']),_0x13dfaa;}},{'key':'getPointData','value':function _0x260241(_0x138de6){var _0x2ba4ad=_0x23d508,_0x5b5ec8=mars3d__namespace['LngLatPoint']['parse'](_0x138de6);if(!_0x5b5ec8)return{};var _0x22edd3=mars3d__namespace[_0x2ba4ad(0xfe)][_0x2ba4ad(0x12d)]([_0x5b5ec8['lng'],_0x5b5ec8['lat']]),_0x140d5d=this[_0x2ba4ad(0x151)],_0x3c6e00=Math[_0x2ba4ad(0x155)]((_0x22edd3[0x0]-_0x140d5d[_0x2ba4ad(_0x1793d1._0x5dbcfe)])/this['_scale']),_0x11bf3f=Math[_0x2ba4ad(_0x1793d1._0x3de17a)]((_0x140d5d[_0x2ba4ad(_0x1793d1._0x2e9cab)]-_0x22edd3[0x1])/this['_scale']),_0x560c73=this['_heat']['getValueAt']({'x':_0x3c6e00,'y':_0x11bf3f}),_0x45fcd2=this[_0x2ba4ad(0x107)]['_renderer'][_0x2ba4ad(0x12e)][_0x2ba4ad(0x15e)](_0x3c6e00-0x1,_0x11bf3f-0x1,0x1,0x1)[_0x2ba4ad(_0x1793d1._0x493607)];return{'x':_0x3c6e00,'y':_0x11bf3f,'value':_0x560c73,'color':_0x2ba4ad(0x146)+_0x45fcd2[0x0]+','+_0x45fcd2[0x1]+','+_0x45fcd2[0x2]+','+_0x45fcd2[0x3]+')'};}}]),_0x3e9f8c;}(BaseLayer);function _0x408f(){var _0x25094d=['getPrototypeOf','minCanvasSize','round','type','GraphicLayer','canvas','create','getOwnPropertyDescriptor','KEEP','layer','2334348xVMNCt','getImageData','1169577uhuQoX','flyToByAnimationEnd','getRectangle','removeLayer','HeatLayer','arcBlurScale','ALPHA_BLEND','_graphic2','PointTrans','lat','Super\x20expression\x20must\x20either\x20be\x20null\x20or\x20a\x20function','93824UTPsUc','13kCWwBw','in\x20vec3\x20position3DHigh;\x0a\x20\x20in\x20vec3\x20position3DLow;\x0a\x20\x20in\x20vec2\x20st;\x0a\x20\x20in\x20float\x20batchId;\x0a\x20\x20uniform\x20sampler2D\x20bumpMap_3;\x0a\x20\x20out\x20vec3\x20v_positionMC;\x0a\x20\x20out\x20vec3\x20v_positionEC;\x0a\x20\x20out\x20vec2\x20v_st;\x0a\x0a\x20\x20void\x20main()\x0a\x20\x20{\x0a\x20\x20\x20\x20vec4\x20p\x20=\x20czm_computePosition();\x0a\x20\x20\x20\x20v_positionMC\x20=\x20position3DHigh\x20+\x20position3DLow;\x0a\x20\x20\x20\x20v_positionEC\x20=\x20(czm_modelViewRelativeToEye\x20*\x20p).xyz;\x0a\x20\x20\x20\x20v_st\x20=\x20st;\x0a\x20\x20\x20\x20vec4\x20color\x20=\x20texture(bumpMap_3,\x20v_st);\x0a\x20\x20\x20\x20float\x20centerBump\x20=\x20distance(vec3(0.0),color.rgb);\x0a\x20\x20\x20\x20vec3\x20upDir\x20=\x20normalize(v_positionMC.xyz);\x0a\x20\x20\x20\x20vec3\x20disPos\x20=\x20upDir\x20*\x20centerBump\x20*\x20','constructor','options','abs','_heat','valueOf','ymin','ymax','bumpMap','_updatePositionsHook','px;height:','isFormat','ImageLayer','DomUtil','configurable','min','prototype','image','forEach','diffHeight','merge','LngLatPoint','12PYuKgk','_mBoundsMax','configure','coordinates','uniforms','_map','arcDirection','concat','EllipsoidSurfaceAppearance','construct','setPositions','container','_getArcHeatCanvas','keys','arcRadiusScale','splitNum','length','rgb(216,216,216)','value','heatStyle','lonlat2mercator','ctx','lng','_layer','REPLACE','_rectangle','StencilOperation','getOwnPropertySymbols','_removedHook','ALWAYS','height','defineProperty','addPosition','_positions','StencilFunction','36066hjyrSN','maxCanvasSize','_createGraphic','_graphic','Cannot\x20call\x20a\x20class\x20as\x20a\x20function','opacity','data','points','clear','764924TBZeDG','rgba(','308BeVyLM','style','2416950pKNDBK','function','addGraphic','removeGraphic','1926415HjyBlY','positions','max','div','_last_mBounds','xmin'];_0x408f=function(){return _0x25094d;};return _0x408f();}mars3d__namespace[_0x4849f9(0x15c)][_0x4849f9(0x163)]=HeatLayer,mars3d__namespace['LayerUtil']['register']('heat',HeatLayer);function getMercatorBounds(_0x51aa2d){var _0x5f00d6={_0x11e247:0x152},_0x5d3e4e=_0x4849f9,_0x4741a4=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x51aa2d[_0x5d3e4e(_0x5f00d6._0x11e247)],_0x51aa2d['ymin']]),_0x3ac34f=mars3d__namespace['PointTrans']['lonlat2mercator']([_0x51aa2d['xmax'],_0x51aa2d[_0x5d3e4e(0x10a)]]);return{'xmin':_0x4741a4[0x0],'ymin':_0x4741a4[0x1],'xmax':_0x3ac34f[0x0],'ymax':_0x3ac34f[0x1]};}function geLatLngBounds(_0x22c4e5){var _0x3ba243={_0x16f2ad:0x10a},_0x36ae1c=_0x4849f9,_0x37aad3=mars3d__namespace['PointTrans']['mercator2lonlat']([_0x22c4e5['xmin'],_0x22c4e5['ymin']]),_0x4b0e9b=mars3d__namespace[_0x36ae1c(0xfe)]['mercator2lonlat']([_0x22c4e5['xmax'],_0x22c4e5[_0x36ae1c(_0x3ba243._0x16f2ad)]]);return{'xmin':_0x37aad3[0x0],'ymin':_0x37aad3[0x1],'xmax':_0x4b0e9b[0x0],'ymax':_0x4b0e9b[0x1]};}function getVertexShaderSource(_0x2b4c61){var _0x88379e=_0x4849f9;return _0x88379e(0x103)[_0x88379e(0x120)](_0x2b4c61,';\x0a\x20\x20\x20\x20p\x20+=vec4(disPos,0.0);\x0a\x20\x20\x20\x20gl_Position\x20=\x20czm_modelViewProjectionRelativeToEye\x20*\x20p;\x0a\x20\x20}\x0a');}function _0x48f4(_0x244d43,_0x1db36e){var _0x408fe2=_0x408f();return _0x48f4=function(_0x48f446,_0x2ca517){_0x48f446=_0x48f446-0xfc;var _0x45a061=_0x408fe2[_0x48f446];return _0x45a061;},_0x48f4(_0x244d43,_0x1db36e);}exports['HeatLayer']=HeatLayer,Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
