/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.11
 * 编译日期：2023-11-04 00:08:20
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x2a68a0=_0x32c2;(function(_0x354a6a,_0x4adca4){const _0x1d8247={_0x132e91:0x1da,_0x4d3870:0x1f1,_0x55a340:0x200,_0x220030:0x20f,_0x3f8898:0x1e3,_0x190948:0x1f2},_0x318d3c=_0x32c2,_0x275098=_0x354a6a();while(!![]){try{const _0x54024c=parseInt(_0x318d3c(0x201))/0x1+-parseInt(_0x318d3c(0x1e9))/0x2*(-parseInt(_0x318d3c(_0x1d8247._0x132e91))/0x3)+-parseInt(_0x318d3c(0x211))/0x4*(-parseInt(_0x318d3c(_0x1d8247._0x4d3870))/0x5)+-parseInt(_0x318d3c(_0x1d8247._0x55a340))/0x6+-parseInt(_0x318d3c(_0x1d8247._0x220030))/0x7+-parseInt(_0x318d3c(_0x1d8247._0x3f8898))/0x8+-parseInt(_0x318d3c(_0x1d8247._0x190948))/0x9;if(_0x54024c===_0x4adca4)break;else _0x275098['push'](_0x275098['shift']());}catch(_0x15a7ef){_0x275098['push'](_0x275098['shift']());}}}(_0x58b8,0x57875));function _interopNamespace(_0x4fe4ee){const _0xc23081={_0x1272f7:0x207},_0x2fd38a=_0x32c2;if(_0x4fe4ee&&_0x4fe4ee[_0x2fd38a(_0xc23081._0x1272f7)])return _0x4fe4ee;var _0x252b9d=Object['create'](null);return _0x4fe4ee&&Object['keys'](_0x4fe4ee)['forEach'](function(_0x178906){const _0x2fda87=_0x2fd38a;if(_0x178906!==_0x2fda87(0x217)){var _0x4f13c0=Object[_0x2fda87(0x20e)](_0x4fe4ee,_0x178906);Object['defineProperty'](_0x252b9d,_0x178906,_0x4f13c0['get']?_0x4f13c0:{'enumerable':!![],'get':function(){return _0x4fe4ee[_0x178906];}});}}),_0x252b9d['default']=_0x4fe4ee,_0x252b9d;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace[_0x2a68a0(0x209)];class CompositeCoordinateSystem{constructor(_0x55fa56,_0x32e9ff){this['_mars3d_scene']=_0x55fa56,this['dimensions']=['lng','lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x32e9ff;}['setMapOffset'](_0x41bd42){const _0x8e9bcd=_0x2a68a0;this[_0x8e9bcd(0x1ff)]=_0x41bd42;}['getBMap'](){const _0x2bf33e={_0x3e4787:0x1ea},_0x506997=_0x2a68a0;return this[_0x506997(_0x2bf33e._0x3e4787)];}['dataToPoint'](_0x1825e9){const _0x4bcef4={_0x1380b1:0x214,_0xf1f75c:0x1ef,_0x130f07:0x1f5,_0x37fc37:0x20a,_0x5197a2:0x1ff},_0xce0680=_0x2a68a0,_0xc36fd8=this['_mars3d_scene'],_0x47a76f=[NaN,NaN];let _0x575c59=_0xc36fd8['echartsFixedHeight'];_0xc36fd8['echartsAutoHeight']&&(_0x575c59=_0xc36fd8['globe']['getHeight'](Cesium$1['Cartographic'][_0xce0680(_0x4bcef4._0x1380b1)](_0x1825e9[0x0],_0x1825e9[0x1])));const _0x11d90f=Cesium$1['Cartesian3']['fromDegrees'](_0x1825e9[0x0],_0x1825e9[0x1],_0x575c59);if(!_0x11d90f)return _0x47a76f;const _0x3e5125=Cesium$1['SceneTransforms'][_0xce0680(0x1fa)](_0xc36fd8,_0x11d90f);if(!_0x3e5125)return _0x47a76f;if(_0xc36fd8['echartsDepthTest']&&_0xc36fd8[_0xce0680(0x1e4)]===Cesium$1[_0xce0680(_0x4bcef4._0xf1f75c)][_0xce0680(0x1de)]){const _0x6cdec8=new Cesium$1['EllipsoidalOccluder'](_0xc36fd8['globe']['ellipsoid'],_0xc36fd8[_0xce0680(_0x4bcef4._0x130f07)]['positionWC']),_0x1e3a37=_0x6cdec8[_0xce0680(_0x4bcef4._0x37fc37)](_0x11d90f);if(!_0x1e3a37)return _0x47a76f;}return[_0x3e5125['x']-this[_0xce0680(_0x4bcef4._0x5197a2)][0x0],_0x3e5125['y']-this[_0xce0680(0x1ff)][0x1]];}['getViewRect'](){const _0x586747=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x586747['getWidth'](),_0x586747['getHeight']());}['getRoamTransform'](){const _0x5b97e2=_0x2a68a0;return echarts__namespace[_0x5b97e2(0x216)]['create']();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem[_0x2a68a0(0x1fc)]=function(_0x22b672,_0x510405){const _0x538cb2=_0x2a68a0;let _0x1be279;const _0x158b98=_0x22b672['scheduler']['ecInstance'][_0x538cb2(0x1ea)];_0x22b672['eachComponent'](_0x538cb2(0x1eb),function(_0x4bdf2c){const _0x51421f=_0x538cb2,_0x33caa5=_0x510405[_0x51421f(0x1f9)]()['painter'];if(!_0x33caa5)return;!_0x1be279&&(_0x1be279=new CompositeCoordinateSystem(_0x158b98,_0x510405)),_0x4bdf2c['coordinateSystem']=_0x1be279,_0x1be279['setMapOffset'](_0x4bdf2c['__mapOffset']||[0x0,0x0]);}),_0x22b672['eachSeries'](function(_0x120619){const _0xe3f0d7=_0x538cb2;_0x120619[_0xe3f0d7(0x1f8)]('coordinateSystem')==='mars3dMap'&&(!_0x1be279&&(_0x1be279=new CompositeCoordinateSystem(_0x158b98,_0x510405)),_0x120619['coordinateSystem']=_0x1be279);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace[_0x2a68a0(0x1ed)]('mars3dMap',CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':_0x2a68a0(0x1fd),'update':_0x2a68a0(0x1d8)},function(_0x523bea,_0x443ef4){}),echarts__namespace[_0x2a68a0(0x1e1)]({'type':_0x2a68a0(0x1eb),'getBMap':function(){const _0x12a553=_0x2a68a0;return this[_0x12a553(0x1ea)];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x245a58,_0x12a0c0){const _0x113c5b={_0x566a97:0x1e8},_0x5a5539=_0x2a68a0;this[_0x5a5539(0x213)]=_0x12a0c0,this['scene']=_0x245a58['scheduler'][_0x5a5539(_0x113c5b._0x566a97)]['_mars3d_scene'],this[_0x5a5539(0x1e2)]['postRender']['addEventListener'](this[_0x5a5539(0x204)],this);},'moveHandler':function(_0x13f517,_0x5acdfa){this['api']['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0xd47b72,_0x13085b,_0x145a5c){},'dispose':function(_0x5a0e39){const _0x3314c1={_0x30654b:0x204},_0x383c42=_0x2a68a0;this['scene']['postRender']['removeEventListener'](this[_0x383c42(_0x3314c1._0x30654b)],this);}});else throw new Error('请引入\x20echarts\x20库\x20');function _0x58b8(){const _0x3173da=['ecInstance','21178nExaYy','_mars3d_scene','mars3dMap','onByQuery','registerCoordinateSystem','style','SceneMode','_addedHook','665aUODXd','39438TvptxJ','max','echarts','camera','pointerEvents','resize','get','getZr','wgs84ToWindowCoordinates','Util','create','mars3dMapRoam','Rectangle','_mapOffset','930090enWyXY','392673MoTNOD','EchartsLayer','_setOptionsHook','moveHandler','series','min','__esModule','_map','Cesium','isPointVisible','top','absolute','getRectangle','getOwnPropertyDescriptor','2300893AkNcFU','register','17552bGCRJa','all','api','fromDegrees','echartsDepthTest','matrix','default','clear','container','_echartsInstance','options','_createChartOverlay','setEchartsOption','getAttrVal','updateLayout','init','27HFBtuz','off','defineProperty','position','SCENE3D','none','layer','extendComponentModel','scene','1799720auJDWx','mode','_echartsContainer','clientWidth','_pointerEvents'];_0x58b8=function(){return _0x3173da;};return _0x58b8();}function _0x32c2(_0x152c33,_0x3f983a){const _0x58b832=_0x58b8();return _0x32c2=function(_0x32c20e,_0x445a36){_0x32c20e=_0x32c20e-0x1d4;let _0x4f11db=_0x58b832[_0x32c20e];return _0x4f11db;},_0x32c2(_0x152c33,_0x3f983a);}const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace[_0x2a68a0(0x1e0)]['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0xa4641e={}){const _0x2d89fe=_0x2a68a0;super(_0xa4641e),this[_0x2d89fe(0x1e7)]=this['options']['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get['pointerEvents'](){const _0x591566={_0x4a51da:0x1e7},_0x499da1=_0x2a68a0;return this[_0x499da1(_0x591566._0x4a51da)];}set['pointerEvents'](_0x3e471e){const _0xbbeb43={_0x2dd811:0x1e5,_0x38ef48:0x1ee},_0x340e70=_0x2a68a0;this['_pointerEvents']=_0x3e471e,this[_0x340e70(_0xbbeb43._0x2dd811)]&&(_0x3e471e?this['_echartsContainer']['style']['pointerEvents']=_0x340e70(0x212):this['_echartsContainer'][_0x340e70(_0xbbeb43._0x38ef48)][_0x340e70(0x1f6)]='none');}[_0x2a68a0(0x203)](_0x166376,_0x4d2228){this['setEchartsOption'](_0x166376);}['_showHook'](_0x5a9e9c){_0x5a9e9c?this['_echartsContainer']['style']['visibility']='visible':this['_echartsContainer']['style']['visibility']='hidden';}['_mountedHook'](){const _0x178ab4={_0x30e7ba:0x1d4},_0x1db5c8=_0x2a68a0;this['_map']['scene'][_0x1db5c8(0x215)]=this['options']['depthTest']??!![],this['_map']['scene']['echartsAutoHeight']=this['options']['clampToGround']??![],this[_0x1db5c8(0x208)]['scene']['echartsFixedHeight']=this[_0x1db5c8(_0x178ab4._0x30e7ba)]['fixedHeight']??0x0;}[_0x2a68a0(0x1f0)](){const _0x2609d4=_0x2a68a0;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace[_0x2609d4(0x1d9)](this['_echartsContainer']),this[_0x2609d4(0x21a)]['_mars3d_scene']=this['_map']['scene'],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x2fa9b1={_0x2376c3:0x21a,_0x33fea4:0x1e5},_0x308b90=_0x2a68a0;this['_echartsInstance']&&(this[_0x308b90(0x21a)][_0x308b90(0x218)](),this[_0x308b90(_0x2fa9b1._0x2376c3)]['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map'][_0x308b90(0x219)]['removeChild'](this['_echartsContainer']),delete this[_0x308b90(_0x2fa9b1._0x33fea4)]);}[_0x2a68a0(0x1d5)](){const _0x493bd4={_0x4e8dcd:0x1ee,_0x59da62:0x1ee,_0x5a5f4d:0x1e2,_0xa7320c:0x1ee},_0x4607f0=_0x2a68a0,_0x2d8da2=mars3d__namespace['DomUtil'][_0x4607f0(0x1fc)]('div','mars3d-echarts',this['_map']['container']);return _0x2d8da2['id']=this['id'],_0x2d8da2['style'][_0x4607f0(0x1dd)]=_0x4607f0(0x20c),_0x2d8da2[_0x4607f0(_0x493bd4._0x4e8dcd)][_0x4607f0(0x20b)]='0px',_0x2d8da2['style']['left']='0px',_0x2d8da2[_0x4607f0(_0x493bd4._0x59da62)]['width']=this['_map'][_0x4607f0(_0x493bd4._0x5a5f4d)]['canvas']['clientWidth']+'px',_0x2d8da2[_0x4607f0(_0x493bd4._0x59da62)]['height']=this['_map']['scene']['canvas']['clientHeight']+'px',_0x2d8da2['style'][_0x4607f0(0x1f6)]=this['_pointerEvents']?'all':_0x4607f0(0x1df),_0x2d8da2[_0x4607f0(_0x493bd4._0xa7320c)]['zIndex']=this['options']['zIndex']??0x9,_0x2d8da2;}['resize'](){const _0x5e350e={_0x304496:0x1f7},_0x397a86=_0x2a68a0;if(!this['_echartsInstance'])return;this['_echartsContainer']['style']['width']=this['_map']['scene']['canvas'][_0x397a86(0x1e6)]+'px',this[_0x397a86(0x1e5)]['style']['height']=this[_0x397a86(0x208)]['scene']['canvas']['clientHeight']+'px',this['_echartsInstance'][_0x397a86(_0x5e350e._0x304496)]();}[_0x2a68a0(0x1d6)](_0x46cf43,_0x3ac7af,_0x3fb864){const _0x33442b={_0x111680:0x1fb,_0xb61fd5:0x1d7},_0x5280b2=_0x2a68a0;this['_echartsInstance']&&(_0x46cf43={'mars3dMap':{},...mars3d__namespace[_0x5280b2(_0x33442b._0x111680)][_0x5280b2(_0x33442b._0xb61fd5)](_0x46cf43,{'onlySimpleType':!![]})},delete _0x46cf43['eventParent'],this['_echartsInstance']['setOption'](_0x46cf43,_0x3ac7af,_0x3fb864));}[_0x2a68a0(0x20d)](_0x571477){const _0x16ade3={_0x262c87:0x1d4,_0x1e10df:0x205,_0x483fd4:0x1fe},_0x27636f={_0x333227:0x1f3,_0x53f1ad:0x206},_0x490a00=_0x2a68a0;let _0x398974,_0x1dcf64,_0x485edb,_0x3d6453;function _0x21a2dd(_0xfc1e17){const _0x1e1580=_0x32c2;if(!Array['isArray'](_0xfc1e17))return;const _0x24dc8b=_0xfc1e17[0x0]||0x0,_0x158d7c=_0xfc1e17[0x1]||0x0;_0x24dc8b!==0x0&&_0x158d7c!==0x0&&(_0x398974===undefined?(_0x398974=_0x24dc8b,_0x1dcf64=_0x24dc8b,_0x485edb=_0x158d7c,_0x3d6453=_0x158d7c):(_0x398974=Math['min'](_0x398974,_0x24dc8b),_0x1dcf64=Math[_0x1e1580(_0x27636f._0x333227)](_0x1dcf64,_0x24dc8b),_0x485edb=Math[_0x1e1580(_0x27636f._0x53f1ad)](_0x485edb,_0x158d7c),_0x3d6453=Math['max'](_0x3d6453,_0x158d7c)));}const _0x548cf8=this[_0x490a00(_0x16ade3._0x262c87)][_0x490a00(_0x16ade3._0x1e10df)];_0x548cf8&&_0x548cf8['forEach'](_0x5e28c3=>{_0x5e28c3['data']&&_0x5e28c3['data']['forEach'](_0x36e0ed=>{if(_0x36e0ed['value'])_0x21a2dd(_0x36e0ed['value']);else _0x36e0ed['coords']&&_0x36e0ed['coords']['forEach'](_0x529bc6=>{_0x21a2dd(_0x529bc6);});});});if(_0x398974===0x0&&_0x485edb===0x0&&_0x1dcf64===0x0&&_0x3d6453===0x0)return null;return _0x571477!==null&&_0x571477!==void 0x0&&_0x571477['isFormat']?{'xmin':_0x398974,'xmax':_0x1dcf64,'ymin':_0x485edb,'ymax':_0x3d6453}:Cesium[_0x490a00(_0x16ade3._0x483fd4)]['fromDegrees'](_0x398974,_0x485edb,_0x1dcf64,_0x3d6453);}['on'](_0x5da915,_0x2687be,_0x1a0ac5){return this['_echartsInstance']['on'](_0x5da915,_0x2687be,_0x1a0ac5||this),this;}[_0x2a68a0(0x1ec)](_0x157d1b,_0x152c4b,_0x32d805,_0x390fce){return this['_echartsInstance']['on'](_0x157d1b,_0x152c4b,_0x32d805,_0x390fce||this),this;}['off'](_0x54e23a,_0x7f2626,_0x1a5ed8){const _0x3f6de2={_0x47d5da:0x1db},_0x240be5=_0x2a68a0;return this[_0x240be5(0x21a)][_0x240be5(_0x3f6de2._0x47d5da)](_0x54e23a,_0x7f2626,_0x1a5ed8||this),this;}}mars3d__namespace['LayerUtil'][_0x2a68a0(0x210)](_0x2a68a0(0x1f4),EchartsLayer),mars3d__namespace[_0x2a68a0(0x1e0)][_0x2a68a0(0x202)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports[_0x2a68a0(0x202)]=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x26a505){const _0x4c3771={_0x5d7ccf:0x1dc},_0x11e5b0=_0x2a68a0;if(_0x26a505!=='default'&&!exports['hasOwnProperty'](_0x26a505))Object[_0x11e5b0(_0x4c3771._0x5d7ccf)](exports,_0x26a505,{'enumerable':!![],'get':function(){return echarts[_0x26a505];}});}),Object['defineProperty'](exports,_0x2a68a0(0x207),{'value':!![]});
}));
