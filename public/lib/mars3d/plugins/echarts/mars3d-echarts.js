/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.15
 * 编译日期：2023-12-05 11:26:18
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x39f423=_0x533f;(function(_0x4d12bc,_0x8c621b){const _0x49db15={_0x3e3109:0xd3,_0x440c83:0xa7,_0x53b68b:0x9a,_0x477a2c:0xa9,_0x4320b2:0xa2},_0x2bdb0c=_0x533f,_0x4a89c6=_0x4d12bc();while(!![]){try{const _0x23e134=parseInt(_0x2bdb0c(0xd8))/0x1+-parseInt(_0x2bdb0c(_0x49db15._0x3e3109))/0x2*(-parseInt(_0x2bdb0c(_0x49db15._0x440c83))/0x3)+parseInt(_0x2bdb0c(0xc5))/0x4*(parseInt(_0x2bdb0c(_0x49db15._0x53b68b))/0x5)+parseInt(_0x2bdb0c(_0x49db15._0x477a2c))/0x6+parseInt(_0x2bdb0c(0x9c))/0x7*(parseInt(_0x2bdb0c(_0x49db15._0x4320b2))/0x8)+-parseInt(_0x2bdb0c(0xa4))/0x9+parseInt(_0x2bdb0c(0xd4))/0xa*(-parseInt(_0x2bdb0c(0xcd))/0xb);if(_0x23e134===_0x8c621b)break;else _0x4a89c6['push'](_0x4a89c6['shift']());}catch(_0x496df8){_0x4a89c6['push'](_0x4a89c6['shift']());}}}(_0x3faa,0xa3159));function _0x533f(_0x5c5991,_0x4bd274){const _0x3faa38=_0x3faa();return _0x533f=function(_0x533f47,_0x155906){_0x533f47=_0x533f47-0x9a;let _0x466ba6=_0x3faa38[_0x533f47];return _0x466ba6;},_0x533f(_0x5c5991,_0x4bd274);}function _0x3faa(){const _0x53517e=['17817CMwhRW','api','5793906KKhWrX','style','SCENE3D','default','LayerUtil','resize','none','请引入\x20echarts\x20库\x20','getViewRect','_addedHook','isPointVisible','_mars3d_scene','_mapOffset','EchartsLayer','setEchartsOption','getRectangle','data','options','dimensions','get','container','getRoamTransform','pointerEvents','_pointerEvents','max','coordinateSystem','clientHeight','ellipsoid','1932DqKmwZ','init','updateLayout','forEach','matrix','scene','all','_echartsInstance','4411akyRYa','mars3d-echarts','_api','mars3dMap','extendComponentView','Cartesian3','120TpCmLT','66490ujuNsd','create','width','_echartsContainer','756655qZpgta','coords','_map','echartsFixedHeight','isFormat','11540rndCQV','height','35dScCCR','off','clampToGround','moveHandler','min','camera','759768gYSHIo','0px','3006207TyfEBN','eachComponent','echartsDepthTest'];_0x3faa=function(){return _0x53517e;};return _0x3faa();}function _interopNamespace(_0xf8cbfa){if(_0xf8cbfa&&_0xf8cbfa['__esModule'])return _0xf8cbfa;var _0x1cae7e=Object['create'](null);return _0xf8cbfa&&Object['keys'](_0xf8cbfa)['forEach'](function(_0x1c24ae){const _0x1e9578=_0x533f;if(_0x1c24ae!==_0x1e9578(0xac)){var _0x2f5421=Object['getOwnPropertyDescriptor'](_0xf8cbfa,_0x1c24ae);Object['defineProperty'](_0x1cae7e,_0x1c24ae,_0x2f5421['get']?_0x2f5421:{'enumerable':!![],'get':function(){return _0xf8cbfa[_0x1c24ae];}});}}),_0x1cae7e['default']=_0xf8cbfa,_0x1cae7e;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x21018b,_0x586205){const _0x34819={_0x567046:0xbb},_0x433b7e=_0x533f;this['_mars3d_scene']=_0x21018b,this[_0x433b7e(_0x34819._0x567046)]=['lng','lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x586205;}['setMapOffset'](_0x3e3313){const _0x34d99b={_0x58aecc:0xb5},_0x371b86=_0x533f;this[_0x371b86(_0x34d99b._0x58aecc)]=_0x3e3313;}['getBMap'](){const _0x4c21fc=_0x533f;return this[_0x4c21fc(0xb4)];}['dataToPoint'](_0x31a752){const _0x18c233={_0x3cd8cd:0xa6,_0xc7f120:0xc4,_0x330659:0xa1,_0x49a14f:0xb3,_0x392fbf:0xb5},_0x454c55=_0x533f,_0x492951=this['_mars3d_scene'],_0x43c4c6=[NaN,NaN];let _0x1a0124=_0x492951['echartsFixedHeight'];_0x492951['echartsAutoHeight']&&(_0x1a0124=_0x492951['globe']['getHeight'](Cesium$1['Cartographic']['fromDegrees'](_0x31a752[0x0],_0x31a752[0x1])));const _0x4023eb=Cesium$1[_0x454c55(0xd2)]['fromDegrees'](_0x31a752[0x0],_0x31a752[0x1],_0x1a0124);if(!_0x4023eb)return _0x43c4c6;const _0xb60013=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x492951,_0x4023eb);if(!_0xb60013)return _0x43c4c6;if(_0x492951[_0x454c55(_0x18c233._0x3cd8cd)]&&_0x492951['mode']===Cesium$1['SceneMode'][_0x454c55(0xab)]){const _0x5dcf69=new Cesium$1['EllipsoidalOccluder'](_0x492951['globe'][_0x454c55(_0x18c233._0xc7f120)],_0x492951[_0x454c55(_0x18c233._0x330659)]['positionWC']),_0x2eea24=_0x5dcf69[_0x454c55(_0x18c233._0x49a14f)](_0x4023eb);if(!_0x2eea24)return _0x43c4c6;}return[_0xb60013['x']-this['_mapOffset'][0x0],_0xb60013['y']-this[_0x454c55(_0x18c233._0x392fbf)][0x1]];}[_0x39f423(0xb1)](){const _0x584ae8={_0x47d556:0xcf},_0x415287=_0x39f423,_0x2c4bbe=this[_0x415287(_0x584ae8._0x47d556)];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x2c4bbe['getWidth'](),_0x2c4bbe['getHeight']());}[_0x39f423(0xbe)](){const _0x46761b=_0x39f423;return echarts__namespace[_0x46761b(0xc9)]['create']();}}CompositeCoordinateSystem['dimensions']=['lng','lat'],CompositeCoordinateSystem['create']=function(_0x40f0aa,_0x7bbaef){const _0x5eb2b3={_0x401363:0xd0},_0x5a3ba8={_0x2d0ef1:0xc2},_0x2442aa=_0x39f423;let _0xb314d8;const _0x1744af=_0x40f0aa['scheduler']['ecInstance']['_mars3d_scene'];_0x40f0aa[_0x2442aa(0xa5)]('mars3dMap',function(_0x5aeb96){const _0x2cbbcd=_0x2442aa,_0x5c06bf=_0x7bbaef['getZr']()['painter'];if(!_0x5c06bf)return;!_0xb314d8&&(_0xb314d8=new CompositeCoordinateSystem(_0x1744af,_0x7bbaef)),_0x5aeb96[_0x2cbbcd(_0x5a3ba8._0x2d0ef1)]=_0xb314d8,_0xb314d8['setMapOffset'](_0x5aeb96['__mapOffset']||[0x0,0x0]);}),_0x40f0aa['eachSeries'](function(_0x238a2f){const _0x24d00a=_0x2442aa;_0x238a2f[_0x24d00a(0xbc)](_0x24d00a(0xc2))===_0x24d00a(_0x5eb2b3._0x401363)&&(!_0xb314d8&&(_0xb314d8=new CompositeCoordinateSystem(_0x1744af,_0x7bbaef)),_0x238a2f['coordinateSystem']=_0xb314d8);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace[_0x39f423(0xc6)])echarts__namespace['registerCoordinateSystem'](_0x39f423(0xd0),CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':_0x39f423(0xc7)},function(_0x13ebeb,_0x3bc5e2){}),echarts__namespace['extendComponentModel']({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x39f423(0xd1)]({'type':_0x39f423(0xd0),'init':function(_0x48812a,_0x3f00f2){const _0x5eccb5=_0x39f423;this[_0x5eccb5(0xa8)]=_0x3f00f2,this['scene']=_0x48812a['scheduler']['ecInstance']['_mars3d_scene'],this['scene']['postRender']['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x8d2144,_0x297778){const _0x1d6915={_0x37790a:0xa8},_0x3ce0d0=_0x39f423;this[_0x3ce0d0(_0x1d6915._0x37790a)]['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0xb5cb4f,_0x334e1f,_0x5a4083){},'dispose':function(_0x1ed572){const _0x36bb10=_0x39f423;this['scene']['postRender']['removeEventListener'](this[_0x36bb10(0x9f)],this);}});else throw new Error(_0x39f423(0xb0));const Cesium=mars3d__namespace['Cesium'],BaseLayer=mars3d__namespace['layer']['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x1160d4={}){const _0x2267b5={_0x56afe1:0xbf},_0x5dd135=_0x39f423;super(_0x1160d4),this['_pointerEvents']=this['options'][_0x5dd135(_0x2267b5._0x56afe1)];}get['layer'](){const _0x5c97bc=_0x39f423;return this[_0x5c97bc(0xcc)];}get[_0x39f423(0xbf)](){return this['_pointerEvents'];}set['pointerEvents'](_0x200bcd){const _0x30b63b=_0x39f423;this[_0x30b63b(0xc0)]=_0x200bcd,this['_echartsContainer']&&(_0x200bcd?this['_echartsContainer'][_0x30b63b(0xaa)]['pointerEvents']='all':this['_echartsContainer']['style']['pointerEvents']='none');}['_setOptionsHook'](_0x50d69f,_0x27cba7){const _0x522d83={_0x59785e:0xb7},_0x187ac8=_0x39f423;this[_0x187ac8(_0x522d83._0x59785e)](_0x50d69f);}['_showHook'](_0x581a81){const _0x1293d9=_0x39f423;_0x581a81?this['_echartsContainer']['style']['visibility']='visible':this[_0x1293d9(0xd7)]['style']['visibility']='hidden';}['_mountedHook'](){const _0x393d41={_0x2ca0be:0xba,_0x5538ba:0xca,_0x5b56ff:0xba},_0x3fabc8=_0x39f423;this['_map']['scene'][_0x3fabc8(0xa6)]=this[_0x3fabc8(_0x393d41._0x2ca0be)]['depthTest']??!![],this['_map'][_0x3fabc8(_0x393d41._0x5538ba)]['echartsAutoHeight']=this['options'][_0x3fabc8(0x9e)]??![],this['_map'][_0x3fabc8(_0x393d41._0x5538ba)][_0x3fabc8(0xdb)]=this[_0x3fabc8(_0x393d41._0x5b56ff)]['fixedHeight']??0x0;}[_0x39f423(0xb2)](){const _0x962a31=_0x39f423;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this['_map'][_0x962a31(0xca)],this['setEchartsOption'](this[_0x962a31(0xba)]);}['_removedHook'](){const _0x3ec0d1={_0x1fdfa5:0xcc,_0x178bcc:0xd7},_0x5bab8f=_0x39f423;this[_0x5bab8f(_0x3ec0d1._0x1fdfa5)]&&(this[_0x5bab8f(0xcc)]['clear'](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map']['container']['removeChild'](this['_echartsContainer']),delete this[_0x5bab8f(_0x3ec0d1._0x178bcc)]);}['_createChartOverlay'](){const _0x31f161={_0x5722db:0xce,_0x1b79dc:0xda,_0x59946d:0xbd,_0x16ddc8:0xa3,_0x3f71ac:0xcb,_0xfcc5f4:0xaf},_0x574b54=_0x39f423,_0xf60495=mars3d__namespace['DomUtil'][_0x574b54(0xd5)]('div',_0x574b54(_0x31f161._0x5722db),this[_0x574b54(_0x31f161._0x1b79dc)][_0x574b54(_0x31f161._0x59946d)]);return _0xf60495['id']=this['id'],_0xf60495[_0x574b54(0xaa)]['position']='absolute',_0xf60495['style']['top']=_0x574b54(_0x31f161._0x16ddc8),_0xf60495['style']['left']=_0x574b54(0xa3),_0xf60495['style']['width']=this['_map'][_0x574b54(0xca)]['canvas']['clientWidth']+'px',_0xf60495['style']['height']=this['_map'][_0x574b54(0xca)]['canvas']['clientHeight']+'px',_0xf60495['style']['pointerEvents']=this['_pointerEvents']?_0x574b54(_0x31f161._0x3f71ac):_0x574b54(_0x31f161._0xfcc5f4),_0xf60495['style']['zIndex']=this['options']['zIndex']??0x9,_0xf60495;}[_0x39f423(0xae)](){const _0x114e9={_0xa751d7:0xd6,_0x4b4c1c:0xc3},_0x248630=_0x39f423;if(!this['_echartsInstance'])return;this['_echartsContainer']['style'][_0x248630(_0x114e9._0xa751d7)]=this['_map']['scene']['canvas']['clientWidth']+'px',this['_echartsContainer']['style'][_0x248630(0x9b)]=this[_0x248630(0xda)]['scene']['canvas'][_0x248630(_0x114e9._0x4b4c1c)]+'px',this['_echartsInstance']['resize']();}[_0x39f423(0xb7)](_0x3212c2,_0x46d452,_0x409d28){this['_echartsInstance']&&(_0x3212c2={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0x3212c2,{'onlySimpleType':!![]})},delete _0x3212c2['eventParent'],this['_echartsInstance']['setOption'](_0x3212c2,_0x46d452,_0x409d28));}[_0x39f423(0xb8)](_0x23bc58){const _0x2a50a1={_0xf63702:0xc8,_0x48d183:0xdc},_0x5a3286={_0x5cf33e:0xa0,_0x1f33b5:0xc1},_0x1fb441=_0x39f423;let _0x1dd7da,_0x26d106,_0x4593b5,_0x37c4b6;function _0x59ab32(_0x1699a1){const _0x272c0a=_0x533f;if(!Array['isArray'](_0x1699a1))return;const _0x38f0da=_0x1699a1[0x0]||0x0,_0x384a44=_0x1699a1[0x1]||0x0;_0x38f0da!==0x0&&_0x384a44!==0x0&&(_0x1dd7da===undefined?(_0x1dd7da=_0x38f0da,_0x26d106=_0x38f0da,_0x4593b5=_0x384a44,_0x37c4b6=_0x384a44):(_0x1dd7da=Math[_0x272c0a(_0x5a3286._0x5cf33e)](_0x1dd7da,_0x38f0da),_0x26d106=Math['max'](_0x26d106,_0x38f0da),_0x4593b5=Math['min'](_0x4593b5,_0x384a44),_0x37c4b6=Math[_0x272c0a(_0x5a3286._0x1f33b5)](_0x37c4b6,_0x384a44)));}const _0x38ee27=this[_0x1fb441(0xba)]['series'];_0x38ee27&&_0x38ee27[_0x1fb441(_0x2a50a1._0xf63702)](_0x204144=>{const _0x218dc7={_0x12b4b5:0xd9},_0x9eb0f7=_0x1fb441;_0x204144['data']&&_0x204144[_0x9eb0f7(0xb9)]['forEach'](_0x575d50=>{const _0x59dbc2=_0x9eb0f7;if(_0x575d50['value'])_0x59ab32(_0x575d50['value']);else _0x575d50['coords']&&_0x575d50[_0x59dbc2(_0x218dc7._0x12b4b5)]['forEach'](_0x2af9d0=>{_0x59ab32(_0x2af9d0);});});});if(_0x1dd7da===0x0&&_0x4593b5===0x0&&_0x26d106===0x0&&_0x37c4b6===0x0)return null;return _0x23bc58!==null&&_0x23bc58!==void 0x0&&_0x23bc58[_0x1fb441(_0x2a50a1._0x48d183)]?{'xmin':_0x1dd7da,'xmax':_0x26d106,'ymin':_0x4593b5,'ymax':_0x37c4b6}:Cesium['Rectangle']['fromDegrees'](_0x1dd7da,_0x4593b5,_0x26d106,_0x37c4b6);}['on'](_0x1800f2,_0x49cc2d,_0x5cf105){return this['_echartsInstance']['on'](_0x1800f2,_0x49cc2d,_0x5cf105||this),this;}['onByQuery'](_0x4b3e63,_0x1b8a66,_0x17a00b,_0x3c4abf){return this['_echartsInstance']['on'](_0x4b3e63,_0x1b8a66,_0x17a00b,_0x3c4abf||this),this;}['off'](_0xe1e178,_0xf15ad5,_0x3e76e6){const _0x1345e9={_0x2aa3f0:0x9d},_0x5e9c2b=_0x39f423;return this['_echartsInstance'][_0x5e9c2b(_0x1345e9._0x2aa3f0)](_0xe1e178,_0xf15ad5,_0x3e76e6||this),this;}}mars3d__namespace[_0x39f423(0xad)]['register']('echarts',EchartsLayer),mars3d__namespace['layer'][_0x39f423(0xb6)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports[_0x39f423(0xb6)]=EchartsLayer,Object['keys'](echarts)['forEach'](function(_0x301c50){if(_0x301c50!=='default'&&!exports['hasOwnProperty'](_0x301c50))Object['defineProperty'](exports,_0x301c50,{'enumerable':!![],'get':function(){return echarts[_0x301c50];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
