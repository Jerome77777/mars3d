/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.9
 * 编译日期：2023-10-17 20:06:19
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x1b3c5d=_0x16c3;(function(_0x308f8e,_0x7b04f7){const _0x19ee6c={_0x336ced:0x201,_0xcac20e:0x1fe,_0x1e854f:0x1fc,_0xf9da9f:0x1ed,_0x2b1e6b:0x1f4,_0x398b92:0x205,_0x2d7831:0x1ff,_0x477de9:0x202},_0x12cd94=_0x16c3,_0x3c34db=_0x308f8e();while(!![]){try{const _0xe1c8cc=parseInt(_0x12cd94(_0x19ee6c._0x336ced))/0x1*(-parseInt(_0x12cd94(_0x19ee6c._0xcac20e))/0x2)+parseInt(_0x12cd94(_0x19ee6c._0x1e854f))/0x3+-parseInt(_0x12cd94(_0x19ee6c._0xf9da9f))/0x4*(parseInt(_0x12cd94(_0x19ee6c._0x2b1e6b))/0x5)+-parseInt(_0x12cd94(0x1fd))/0x6+parseInt(_0x12cd94(0x212))/0x7*(-parseInt(_0x12cd94(_0x19ee6c._0x398b92))/0x8)+-parseInt(_0x12cd94(_0x19ee6c._0x2d7831))/0x9+parseInt(_0x12cd94(_0x19ee6c._0x477de9))/0xa;if(_0xe1c8cc===_0x7b04f7)break;else _0x3c34db['push'](_0x3c34db['shift']());}catch(_0x3dc462){_0x3c34db['push'](_0x3c34db['shift']());}}}(_0x5c92,0x598c4));function _0x5c92(){const _0x3c1c95=['fromDegrees','off','width','canvas','postRender','removeChild','options','clear','painter','data','setOption','echarts','EchartsLayer','clientWidth','Cesium','getHeight','positionWC','visibility','onByQuery','left','__esModule','top','create','EllipsoidalOccluder','echartsFixedHeight','getWidth','defineProperty','coordinateSystem','76voLohM','height','scheduler','Cartesian3','Cartographic','SceneMode','max','41995qumMEb','dimensions','extendComponentView','min','extendComponentModel','layer','clientHeight','camera','86151unpAbb','3083382PRGtxD','2VULick','583515duscaJ','getOwnPropertyDescriptor','649150tqFjVt','23642770KGnamO','updateLayout','getZr','56KpyGak','keys','scene','pointerEvents','coords','get','lng','series','_echartsInstance','all','getBMap','style','forEach','638743SqnXcG','_map','mars3dMap','_mapOffset','default','_echartsContainer','0px','_mars3d_scene'];_0x5c92=function(){return _0x3c1c95;};return _0x5c92();}function _interopNamespace(_0x4f318d){const _0x1dca50={_0xee50e0:0x206},_0x20b797={_0x317a1c:0x1eb},_0x3c3c4d=_0x16c3;if(_0x4f318d&&_0x4f318d[_0x3c3c4d(0x1e5)])return _0x4f318d;var _0x343cb7=Object['create'](null);return _0x4f318d&&Object[_0x3c3c4d(_0x1dca50._0xee50e0)](_0x4f318d)[_0x3c3c4d(0x211)](function(_0x3f6106){const _0x1d767a=_0x3c3c4d;if(_0x3f6106!==_0x1d767a(0x1cd)){var _0xf3409a=Object[_0x1d767a(0x200)](_0x4f318d,_0x3f6106);Object[_0x1d767a(_0x20b797._0x317a1c)](_0x343cb7,_0x3f6106,_0xf3409a[_0x1d767a(0x20a)]?_0xf3409a:{'enumerable':!![],'get':function(){return _0x4f318d[_0x3f6106];}});}}),_0x343cb7[_0x3c3c4d(0x1cd)]=_0x4f318d,_0x343cb7;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);const Cesium$1=mars3d__namespace[_0x1b3c5d(0x1df)];function _0x16c3(_0x2b00d6,_0x18b905){const _0x5c92c9=_0x5c92();return _0x16c3=function(_0x16c36d,_0x180e6c){_0x16c36d=_0x16c36d-0x1cc;let _0x1030ea=_0x5c92c9[_0x16c36d];return _0x1030ea;},_0x16c3(_0x2b00d6,_0x18b905);}class CompositeCoordinateSystem{constructor(_0x1a85ea,_0x58a698){const _0x26a019={_0x5db0a2:0x1d0},_0x53b715=_0x1b3c5d;this[_0x53b715(_0x26a019._0x5db0a2)]=_0x1a85ea,this[_0x53b715(0x1f5)]=['lng','lat'],this['_mapOffset']=[0x0,0x0],this['_api']=_0x58a698;}['setMapOffset'](_0xa226a2){this['_mapOffset']=_0xa226a2;}[_0x1b3c5d(0x20f)](){return this['_mars3d_scene'];}['dataToPoint'](_0x3fc296){const _0x5a5855={_0x3937ee:0x1e0,_0x2300a6:0x1f1,_0x42d3da:0x1d1,_0x6bdcc7:0x1f0,_0x487e28:0x1fb,_0x5eb5dc:0x1e1,_0x261ee0:0x1cc},_0x17a896=_0x1b3c5d,_0x1901b3=this['_mars3d_scene'],_0x443a75=[NaN,NaN];let _0x488c8d=_0x1901b3['echartsFixedHeight'];_0x1901b3['echartsAutoHeight']&&(_0x488c8d=_0x1901b3['globe'][_0x17a896(_0x5a5855._0x3937ee)](Cesium$1[_0x17a896(_0x5a5855._0x2300a6)][_0x17a896(_0x5a5855._0x42d3da)](_0x3fc296[0x0],_0x3fc296[0x1])));const _0x40f2aa=Cesium$1[_0x17a896(_0x5a5855._0x6bdcc7)][_0x17a896(_0x5a5855._0x42d3da)](_0x3fc296[0x0],_0x3fc296[0x1],_0x488c8d);if(!_0x40f2aa)return _0x443a75;const _0x1c81b6=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x1901b3,_0x40f2aa);if(!_0x1c81b6)return _0x443a75;if(_0x1901b3['echartsDepthTest']&&_0x1901b3['mode']===Cesium$1[_0x17a896(0x1f2)]['SCENE3D']){const _0x670b52=new Cesium$1[(_0x17a896(0x1e8))](_0x1901b3['globe']['ellipsoid'],_0x1901b3[_0x17a896(_0x5a5855._0x487e28)][_0x17a896(_0x5a5855._0x5eb5dc)]),_0x363896=_0x670b52['isPointVisible'](_0x40f2aa);if(!_0x363896)return _0x443a75;}return[_0x1c81b6['x']-this['_mapOffset'][0x0],_0x1c81b6['y']-this[_0x17a896(_0x5a5855._0x261ee0)][0x1]];}['getViewRect'](){const _0x2a15af={_0xea24e7:0x1ea},_0x18945f=_0x1b3c5d,_0x26958b=this['_api'];return new echarts__namespace['graphic']['BoundingRect'](0x0,0x0,_0x26958b[_0x18945f(_0x2a15af._0xea24e7)](),_0x26958b['getHeight']());}['getRoamTransform'](){const _0x151b3d={_0x975e13:0x1e7},_0x3c5a09=_0x1b3c5d;return echarts__namespace['matrix'][_0x3c5a09(_0x151b3d._0x975e13)]();}}CompositeCoordinateSystem['dimensions']=[_0x1b3c5d(0x20b),'lat'],CompositeCoordinateSystem['create']=function(_0x36ae73,_0x1b9b76){const _0x373c9f={_0xe6e376:0x1d0},_0x200bac={_0x37dca9:0x1d9,_0x4d6411:0x1ec},_0x4293e3=_0x1b3c5d;let _0x47ac32;const _0x1c9d98=_0x36ae73[_0x4293e3(0x1ef)]['ecInstance'][_0x4293e3(_0x373c9f._0xe6e376)];_0x36ae73['eachComponent']('mars3dMap',function(_0x184c27){const _0x530069=_0x4293e3,_0x131dd4=_0x1b9b76[_0x530069(0x204)]()[_0x530069(_0x200bac._0x37dca9)];if(!_0x131dd4)return;!_0x47ac32&&(_0x47ac32=new CompositeCoordinateSystem(_0x1c9d98,_0x1b9b76)),_0x184c27[_0x530069(_0x200bac._0x4d6411)]=_0x47ac32,_0x47ac32['setMapOffset'](_0x184c27['__mapOffset']||[0x0,0x0]);}),_0x36ae73['eachSeries'](function(_0xb4fad0){_0xb4fad0['get']('coordinateSystem')==='mars3dMap'&&(!_0x47ac32&&(_0x47ac32=new CompositeCoordinateSystem(_0x1c9d98,_0x1b9b76)),_0xb4fad0['coordinateSystem']=_0x47ac32);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace['registerCoordinateSystem'](_0x1b3c5d(0x214),CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':_0x1b3c5d(0x203)},function(_0x2ce900,_0x11bf90){}),echarts__namespace[_0x1b3c5d(0x1f8)]({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace[_0x1b3c5d(0x1f6)]({'type':'mars3dMap','init':function(_0x1977bb,_0x579024){const _0x5840ef=_0x1b3c5d;this['api']=_0x579024,this['scene']=_0x1977bb['scheduler']['ecInstance']['_mars3d_scene'],this['scene'][_0x5840ef(0x1d5)]['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x3fee16,_0x59447a){this['api']['dispatchAction']({'type':'mars3dMapRoam'});},'render':function(_0x2bcc7d,_0x29f865,_0x53c705){},'dispose':function(_0x32373b){const _0x896430={_0x497470:0x207},_0x384a1d=_0x1b3c5d;this[_0x384a1d(_0x896430._0x497470)]['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error('请引入\x20echarts\x20库\x20');const Cesium=mars3d__namespace[_0x1b3c5d(0x1df)],BaseLayer=mars3d__namespace[_0x1b3c5d(0x1f9)]['BaseLayer'];class EchartsLayer extends BaseLayer{constructor(_0x544b6e={}){super(_0x544b6e),this['_pointerEvents']=this['options']['pointerEvents'];}get['layer'](){return this['_echartsInstance'];}get['pointerEvents'](){return this['_pointerEvents'];}set['pointerEvents'](_0x5bd90e){const _0x32cdfc={_0x1b78bd:0x1ce,_0x2700b7:0x20e},_0x5aaf69=_0x1b3c5d;this['_pointerEvents']=_0x5bd90e,this[_0x5aaf69(_0x32cdfc._0x1b78bd)]&&(_0x5bd90e?this['_echartsContainer']['style']['pointerEvents']=_0x5aaf69(_0x32cdfc._0x2700b7):this['_echartsContainer'][_0x5aaf69(0x210)]['pointerEvents']='none');}['_setOptionsHook'](_0x49bfe8,_0x488064){this['setEchartsOption'](_0x49bfe8);}['_showHook'](_0x397b7c){const _0x31ef57={_0x149228:0x1e2},_0x37bbd3=_0x1b3c5d;_0x397b7c?this['_echartsContainer']['style'][_0x37bbd3(_0x31ef57._0x149228)]='visible':this['_echartsContainer']['style']['visibility']='hidden';}['_mountedHook'](){const _0x588e12={_0x5c16a7:0x207},_0x1e15e2=_0x1b3c5d;this['_map']['scene']['echartsDepthTest']=this['options']['depthTest']??!![],this[_0x1e15e2(0x213)][_0x1e15e2(_0x588e12._0x5c16a7)]['echartsAutoHeight']=this['options']['clampToGround']??![],this['_map'][_0x1e15e2(0x207)][_0x1e15e2(0x1e9)]=this['options']['fixedHeight']??0x0;}['_addedHook'](){const _0x512815=_0x1b3c5d;this['_echartsContainer']=this['_createChartOverlay'](),this['_echartsInstance']=echarts__namespace['init'](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this['_map'][_0x512815(0x207)],this['setEchartsOption'](this['options']);}['_removedHook'](){const _0x4ecd2e={_0xec5065:0x1d8,_0x410617:0x1d6,_0x3e2993:0x1ce},_0x2ab63e=_0x1b3c5d;this['_echartsInstance']&&(this[_0x2ab63e(0x20d)][_0x2ab63e(_0x4ecd2e._0xec5065)](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map']['container'][_0x2ab63e(_0x4ecd2e._0x410617)](this['_echartsContainer']),delete this[_0x2ab63e(_0x4ecd2e._0x3e2993)]);}['_createChartOverlay'](){const _0x54627a={_0x380cff:0x1e7,_0x4d70e7:0x1e6,_0x2c6016:0x1cf,_0x5a356a:0x1ee,_0x350e7d:0x210},_0x15a813=_0x1b3c5d,_0x3d1d0c=mars3d__namespace['DomUtil'][_0x15a813(_0x54627a._0x380cff)]('div','mars3d-echarts',this['_map']['container']);return _0x3d1d0c['id']=this['id'],_0x3d1d0c[_0x15a813(0x210)]['position']='absolute',_0x3d1d0c['style'][_0x15a813(_0x54627a._0x4d70e7)]='0px',_0x3d1d0c['style'][_0x15a813(0x1e4)]=_0x15a813(_0x54627a._0x2c6016),_0x3d1d0c['style']['width']=this['_map']['scene']['canvas'][_0x15a813(0x1de)]+'px',_0x3d1d0c[_0x15a813(0x210)][_0x15a813(_0x54627a._0x5a356a)]=this['_map']['scene'][_0x15a813(0x1d4)][_0x15a813(0x1fa)]+'px',_0x3d1d0c[_0x15a813(_0x54627a._0x350e7d)][_0x15a813(0x208)]=this['_pointerEvents']?'all':'none',_0x3d1d0c['style']['zIndex']=this[_0x15a813(0x1d7)]['zIndex']??0x9,_0x3d1d0c;}['resize'](){const _0x5d8477={_0x11dff7:0x1d4,_0x1733f4:0x1ee,_0x39ebd5:0x1d4},_0x545630=_0x1b3c5d;if(!this[_0x545630(0x20d)])return;this['_echartsContainer']['style'][_0x545630(0x1d3)]=this[_0x545630(0x213)]['scene'][_0x545630(_0x5d8477._0x11dff7)]['clientWidth']+'px',this[_0x545630(0x1ce)]['style'][_0x545630(_0x5d8477._0x1733f4)]=this['_map'][_0x545630(0x207)][_0x545630(_0x5d8477._0x39ebd5)]['clientHeight']+'px',this['_echartsInstance']['resize']();}['setEchartsOption'](_0x342d4c,_0x51b278,_0x2e2171){const _0x4fe956={_0x1f0bb6:0x1db},_0xedaacb=_0x1b3c5d;this['_echartsInstance']&&(_0x342d4c['mars3dMap']=_0x342d4c[_0xedaacb(0x214)]||{},this['_echartsInstance'][_0xedaacb(_0x4fe956._0x1f0bb6)](_0x342d4c,_0x51b278,_0x2e2171));}['getRectangle'](_0x50bd0a){const _0x805b45={_0x301a56:0x1d7},_0x33f22b={_0x5a464d:0x1da},_0x369a3b=_0x1b3c5d;let _0x56ddc5,_0x34caa4,_0x514b59,_0x4f2d91;function _0x254c0f(_0x3a6c07){const _0xe54715=_0x16c3;if(!Array['isArray'](_0x3a6c07))return;const _0x2eae24=_0x3a6c07[0x0]||0x0,_0x1bd715=_0x3a6c07[0x1]||0x0;_0x2eae24!==0x0&&_0x1bd715!==0x0&&(_0x56ddc5===undefined?(_0x56ddc5=_0x2eae24,_0x34caa4=_0x2eae24,_0x514b59=_0x1bd715,_0x4f2d91=_0x1bd715):(_0x56ddc5=Math['min'](_0x56ddc5,_0x2eae24),_0x34caa4=Math['max'](_0x34caa4,_0x2eae24),_0x514b59=Math[_0xe54715(0x1f7)](_0x514b59,_0x1bd715),_0x4f2d91=Math[_0xe54715(0x1f3)](_0x4f2d91,_0x1bd715)));}const _0x4ca326=this[_0x369a3b(_0x805b45._0x301a56)][_0x369a3b(0x20c)];_0x4ca326&&_0x4ca326['forEach'](_0xbdea73=>{const _0x419ccb={_0x225b64:0x209},_0x473fad=_0x369a3b;_0xbdea73['data']&&_0xbdea73[_0x473fad(_0x33f22b._0x5a464d)]['forEach'](_0x17f027=>{const _0x3814bd=_0x473fad;if(_0x17f027['value'])_0x254c0f(_0x17f027['value']);else _0x17f027['coords']&&_0x17f027[_0x3814bd(_0x419ccb._0x225b64)]['forEach'](_0x1ee8d0=>{_0x254c0f(_0x1ee8d0);});});});if(_0x56ddc5===0x0&&_0x514b59===0x0&&_0x34caa4===0x0&&_0x4f2d91===0x0)return null;return _0x50bd0a!==null&&_0x50bd0a!==void 0x0&&_0x50bd0a['isFormat']?{'xmin':_0x56ddc5,'xmax':_0x34caa4,'ymin':_0x514b59,'ymax':_0x4f2d91}:Cesium['Rectangle']['fromDegrees'](_0x56ddc5,_0x514b59,_0x34caa4,_0x4f2d91);}['on'](_0x1fd0a4,_0x3ef0e3,_0x12ae06){return this['_echartsInstance']['on'](_0x1fd0a4,_0x3ef0e3,_0x12ae06||this),this;}[_0x1b3c5d(0x1e3)](_0x29ff90,_0x510ea0,_0x197345,_0x25563a){return this['_echartsInstance']['on'](_0x29ff90,_0x510ea0,_0x197345,_0x25563a||this),this;}[_0x1b3c5d(0x1d2)](_0x5317c2,_0x5b3b2b,_0x981cb6){const _0x1bfc15={_0x51e953:0x1d2},_0x183521=_0x1b3c5d;return this['_echartsInstance'][_0x183521(_0x1bfc15._0x51e953)](_0x5317c2,_0x5b3b2b,_0x981cb6||this),this;}}mars3d__namespace['LayerUtil']['register'](_0x1b3c5d(0x1dc),EchartsLayer),mars3d__namespace['layer'][_0x1b3c5d(0x1dd)]=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports[_0x1b3c5d(0x1dd)]=EchartsLayer,Object['keys'](echarts)[_0x1b3c5d(0x211)](function(_0x80bc6){if(_0x80bc6!=='default'&&!exports['hasOwnProperty'](_0x80bc6))Object['defineProperty'](exports,_0x80bc6,{'enumerable':!![],'get':function(){return echarts[_0x80bc6];}});}),Object['defineProperty'](exports,_0x1b3c5d(0x1e5),{'value':!![]});
}));
