/**
 * Mars3D平台插件,结合echarts可视化功能插件  mars3d-echarts
 *
 * 版本信息：v3.6.13
 * 编译日期：2023-11-20 21:18:04
 * 版权所有：Copyright by 火星科技  http://mars3d.cn
 * 使用单位：免费公开版 ，2023-03-17
 */
(function (global, factory) {
  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, (window.echarts || require('echarts')), (window.mars3d || require('mars3d'))) :
  typeof define === 'function' && define.amd ? define(['exports', 'echarts', 'mars3d'], factory) :
  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global["mars3d-echarts"] = {}, global.echarts, global.mars3d));
})(this, (function (exports, echarts, mars3d) { 
'use strict';const _0x1a1a05=_0x370c;(function(_0x615504,_0x12ddca){const _0x622fe1={_0x7b940d:0x19e,_0x2e2185:0x1a8,_0x2a9d71:0x1c3},_0xcb1977=_0x370c,_0x4355b2=_0x615504();while(!![]){try{const _0x27c04f=-parseInt(_0xcb1977(_0x622fe1._0x7b940d))/0x1*(-parseInt(_0xcb1977(0x1a0))/0x2)+parseInt(_0xcb1977(0x1cb))/0x3+-parseInt(_0xcb1977(_0x622fe1._0x2e2185))/0x4+-parseInt(_0xcb1977(0x19d))/0x5+parseInt(_0xcb1977(_0x622fe1._0x2a9d71))/0x6+parseInt(_0xcb1977(0x1a2))/0x7+-parseInt(_0xcb1977(0x1c5))/0x8;if(_0x27c04f===_0x12ddca)break;else _0x4355b2['push'](_0x4355b2['shift']());}catch(_0x139ffa){_0x4355b2['push'](_0x4355b2['shift']());}}}(_0x1bbd,0x73430));function _0x1bbd(){const _0x17d069=['echartsAutoHeight','请引入\x20echarts\x20库\x20','postRender','_echartsInstance','forEach','clientHeight','coordinateSystem','onByQuery','__mapOffset','_echartsContainer','mars3dMapRoam','globe','style','value','_mapOffset','absolute','1166495QhKFIl','1234QdrjMy','layer','980shbevq','removeChild','1226323yZbtrL','width','_map','_removedHook','fromDegrees','BaseLayer','3253900UeyBbr','init','graphic','coords','none','_pointerEvents','mode','getWidth','left','lat','registerCoordinateSystem','__esModule','scene','Cesium','visibility','SceneMode','clear','eachComponent','options','_showHook','eventParent','echartsDepthTest','eachSeries','dispatchAction','extendComponentModel','echartsFixedHeight','matrix','2132556OBkAVO','fixedHeight','1076816pnekSE','clientWidth','mars3dMap','setEchartsOption','container','isPointVisible','1554639SqahCi','Cartographic','resize','echarts'];_0x1bbd=function(){return _0x17d069;};return _0x1bbd();}function _interopNamespace(_0x1d271b){const _0x5ab2fc=_0x370c;if(_0x1d271b&&_0x1d271b[_0x5ab2fc(0x1b3)])return _0x1d271b;var _0x19b7b7=Object['create'](null);return _0x1d271b&&Object['keys'](_0x1d271b)[_0x5ab2fc(0x1d3)](function(_0x5e4e7b){if(_0x5e4e7b!=='default'){var _0x154ae6=Object['getOwnPropertyDescriptor'](_0x1d271b,_0x5e4e7b);Object['defineProperty'](_0x19b7b7,_0x5e4e7b,_0x154ae6['get']?_0x154ae6:{'enumerable':!![],'get':function(){return _0x1d271b[_0x5e4e7b];}});}}),_0x19b7b7['default']=_0x1d271b,_0x19b7b7;}var echarts__namespace=_interopNamespace(echarts),mars3d__namespace=_interopNamespace(mars3d);function _0x370c(_0x34f6bb,_0x129626){const _0x1bbd25=_0x1bbd();return _0x370c=function(_0x370c94,_0xc99a9d){_0x370c94=_0x370c94-0x19a;let _0x2a8715=_0x1bbd25[_0x370c94];return _0x2a8715;},_0x370c(_0x34f6bb,_0x129626);}const Cesium$1=mars3d__namespace['Cesium'];class CompositeCoordinateSystem{constructor(_0x235855,_0x318796){const _0x54a06c={_0x13b97b:0x1b1},_0x287542=_0x370c;this['_mars3d_scene']=_0x235855,this['dimensions']=['lng',_0x287542(_0x54a06c._0x13b97b)],this[_0x287542(0x19b)]=[0x0,0x0],this['_api']=_0x318796;}['setMapOffset'](_0x1c6593){this['_mapOffset']=_0x1c6593;}['getBMap'](){return this['_mars3d_scene'];}['dataToPoint'](_0xf72516){const _0x458403={_0x8a6270:0x1cc,_0xad81e6:0x1a6,_0x4a3f58:0x1bd,_0x22067a:0x1ae,_0x20f1d8:0x1b7,_0x1a3f96:0x1da,_0x1b6843:0x1ca},_0x5302e0=_0x370c,_0x2da63d=this['_mars3d_scene'],_0xb32814=[NaN,NaN];let _0x4840e4=_0x2da63d[_0x5302e0(0x1c1)];_0x2da63d['echartsAutoHeight']&&(_0x4840e4=_0x2da63d['globe']['getHeight'](Cesium$1[_0x5302e0(_0x458403._0x8a6270)][_0x5302e0(_0x458403._0xad81e6)](_0xf72516[0x0],_0xf72516[0x1])));const _0x5abb01=Cesium$1['Cartesian3']['fromDegrees'](_0xf72516[0x0],_0xf72516[0x1],_0x4840e4);if(!_0x5abb01)return _0xb32814;const _0x3af3b5=Cesium$1['SceneTransforms']['wgs84ToWindowCoordinates'](_0x2da63d,_0x5abb01);if(!_0x3af3b5)return _0xb32814;if(_0x2da63d[_0x5302e0(_0x458403._0x4a3f58)]&&_0x2da63d[_0x5302e0(_0x458403._0x22067a)]===Cesium$1[_0x5302e0(_0x458403._0x20f1d8)]['SCENE3D']){const _0xe0a1d2=new Cesium$1['EllipsoidalOccluder'](_0x2da63d[_0x5302e0(_0x458403._0x1a3f96)]['ellipsoid'],_0x2da63d['camera']['positionWC']),_0x1fff4a=_0xe0a1d2[_0x5302e0(_0x458403._0x1b6843)](_0x5abb01);if(!_0x1fff4a)return _0xb32814;}return[_0x3af3b5['x']-this['_mapOffset'][0x0],_0x3af3b5['y']-this['_mapOffset'][0x1]];}['getViewRect'](){const _0x2c0eb1={_0x1580bc:0x1af},_0x1fa916=_0x370c,_0x661aa0=this['_api'];return new echarts__namespace[(_0x1fa916(0x1aa))]['BoundingRect'](0x0,0x0,_0x661aa0[_0x1fa916(_0x2c0eb1._0x1580bc)](),_0x661aa0['getHeight']());}['getRoamTransform'](){const _0x113344=_0x370c;return echarts__namespace[_0x113344(0x1c2)]['create']();}}CompositeCoordinateSystem['dimensions']=['lng',_0x1a1a05(0x1b1)],CompositeCoordinateSystem['create']=function(_0x5a4d71,_0x102d6b){const _0x1c823b={_0x245029:0x1d7},_0xdbcd76=_0x1a1a05;let _0x18f919;const _0x1b1bf7=_0x5a4d71['scheduler']['ecInstance']['_mars3d_scene'];_0x5a4d71[_0xdbcd76(0x1b9)]('mars3dMap',function(_0x26f6da){const _0x23ce27=_0xdbcd76,_0x542363=_0x102d6b['getZr']()['painter'];if(!_0x542363)return;!_0x18f919&&(_0x18f919=new CompositeCoordinateSystem(_0x1b1bf7,_0x102d6b)),_0x26f6da['coordinateSystem']=_0x18f919,_0x18f919['setMapOffset'](_0x26f6da[_0x23ce27(_0x1c823b._0x245029)]||[0x0,0x0]);}),_0x5a4d71[_0xdbcd76(0x1be)](function(_0x218f12){const _0x17ea63=_0xdbcd76;_0x218f12['get'](_0x17ea63(0x1d5))==='mars3dMap'&&(!_0x18f919&&(_0x18f919=new CompositeCoordinateSystem(_0x1b1bf7,_0x102d6b)),_0x218f12['coordinateSystem']=_0x18f919);});};if(echarts__namespace!==null&&echarts__namespace!==void 0x0&&echarts__namespace['init'])echarts__namespace[_0x1a1a05(0x1b2)](_0x1a1a05(0x1c7),CompositeCoordinateSystem),echarts__namespace['registerAction']({'type':'mars3dMapRoam','event':'mars3dMapRoam','update':'updateLayout'},function(_0xa375b0,_0x5a1d65){}),echarts__namespace[_0x1a1a05(0x1c0)]({'type':'mars3dMap','getBMap':function(){return this['_mars3d_scene'];},'defaultOption':{'roam':![]}}),echarts__namespace['extendComponentView']({'type':'mars3dMap','init':function(_0x52d87c,_0x35b47f){const _0x2954e7=_0x1a1a05;this['api']=_0x35b47f,this['scene']=_0x52d87c['scheduler']['ecInstance']['_mars3d_scene'],this['scene'][_0x2954e7(0x1d1)]['addEventListener'](this['moveHandler'],this);},'moveHandler':function(_0x44e99b,_0x22f706){const _0x479168={_0x57876f:0x1bf},_0x183494=_0x1a1a05;this['api'][_0x183494(_0x479168._0x57876f)]({'type':_0x183494(0x1d9)});},'render':function(_0x535748,_0x3cb082,_0x3a9079){},'dispose':function(_0x4658dd){const _0x2b44fb=_0x1a1a05;this[_0x2b44fb(0x1b4)]['postRender']['removeEventListener'](this['moveHandler'],this);}});else throw new Error(_0x1a1a05(0x1d0));const Cesium=mars3d__namespace[_0x1a1a05(0x1b5)],BaseLayer=mars3d__namespace[_0x1a1a05(0x19f)][_0x1a1a05(0x1a7)];class EchartsLayer extends BaseLayer{constructor(_0x37acda={}){const _0x460fb9={_0x4bc380:0x1ad},_0x2330b8=_0x1a1a05;super(_0x37acda),this[_0x2330b8(_0x460fb9._0x4bc380)]=this['options']['pointerEvents'];}get[_0x1a1a05(0x19f)](){const _0x1b487f=_0x1a1a05;return this[_0x1b487f(0x1d2)];}get['pointerEvents'](){const _0x392888={_0x23d1e6:0x1ad},_0x1440b6=_0x1a1a05;return this[_0x1440b6(_0x392888._0x23d1e6)];}set['pointerEvents'](_0x2a8707){const _0x7e47ef={_0x6d6fe6:0x1d8,_0x5d8791:0x1db,_0x659271:0x1ac},_0x33a386=_0x1a1a05;this['_pointerEvents']=_0x2a8707,this[_0x33a386(_0x7e47ef._0x6d6fe6)]&&(_0x2a8707?this['_echartsContainer'][_0x33a386(_0x7e47ef._0x5d8791)]['pointerEvents']='all':this['_echartsContainer']['style']['pointerEvents']=_0x33a386(_0x7e47ef._0x659271));}['_setOptionsHook'](_0x4bc8de,_0x306ea8){this['setEchartsOption'](_0x4bc8de);}[_0x1a1a05(0x1bb)](_0x476b2c){const _0x51da75={_0x1a5800:0x1d8},_0x5da246=_0x1a1a05;_0x476b2c?this[_0x5da246(0x1d8)]['style']['visibility']='visible':this[_0x5da246(_0x51da75._0x1a5800)][_0x5da246(0x1db)][_0x5da246(0x1b6)]='hidden';}['_mountedHook'](){const _0xe61f97={_0x944696:0x1b4},_0x3b16a7=_0x1a1a05;this[_0x3b16a7(0x1a4)]['scene'][_0x3b16a7(0x1bd)]=this['options']['depthTest']??!![],this['_map'][_0x3b16a7(_0xe61f97._0x944696)][_0x3b16a7(0x1cf)]=this['options']['clampToGround']??![],this['_map'][_0x3b16a7(0x1b4)]['echartsFixedHeight']=this['options'][_0x3b16a7(0x1c4)]??0x0;}['_addedHook'](){const _0x415271={_0x1e7498:0x1d2,_0x289b46:0x1c8},_0x12909d=_0x1a1a05;this[_0x12909d(0x1d8)]=this['_createChartOverlay'](),this[_0x12909d(_0x415271._0x1e7498)]=echarts__namespace[_0x12909d(0x1a9)](this['_echartsContainer']),this['_echartsInstance']['_mars3d_scene']=this['_map']['scene'],this[_0x12909d(_0x415271._0x289b46)](this['options']);}[_0x1a1a05(0x1a5)](){const _0x5f4d6e={_0x16515b:0x1b8,_0x3fa9db:0x1a1,_0x12afba:0x1d8},_0x5b1e19=_0x1a1a05;this['_echartsInstance']&&(this[_0x5b1e19(0x1d2)][_0x5b1e19(_0x5f4d6e._0x16515b)](),this['_echartsInstance']['dispose'](),delete this['_echartsInstance']),this['_echartsContainer']&&(this['_map']['container'][_0x5b1e19(_0x5f4d6e._0x3fa9db)](this['_echartsContainer']),delete this[_0x5b1e19(_0x5f4d6e._0x12afba)]);}['_createChartOverlay'](){const _0x242ab0={_0xaaf5cf:0x1db,_0x4747d7:0x1c6,_0x2215d5:0x1ad},_0x31d03b=_0x1a1a05,_0x5c6e0b=mars3d__namespace['DomUtil']['create']('div','mars3d-echarts',this['_map'][_0x31d03b(0x1c9)]);return _0x5c6e0b['id']=this['id'],_0x5c6e0b['style']['position']=_0x31d03b(0x19c),_0x5c6e0b['style']['top']='0px',_0x5c6e0b[_0x31d03b(_0x242ab0._0xaaf5cf)][_0x31d03b(0x1b0)]='0px',_0x5c6e0b['style']['width']=this['_map'][_0x31d03b(0x1b4)]['canvas'][_0x31d03b(_0x242ab0._0x4747d7)]+'px',_0x5c6e0b['style']['height']=this['_map']['scene']['canvas'][_0x31d03b(0x1d4)]+'px',_0x5c6e0b['style']['pointerEvents']=this[_0x31d03b(_0x242ab0._0x2215d5)]?'all':_0x31d03b(0x1ac),_0x5c6e0b['style']['zIndex']=this['options']['zIndex']??0x9,_0x5c6e0b;}[_0x1a1a05(0x1cd)](){const _0xa6b127={_0x3cfcde:0x1a4,_0x253c66:0x1d2},_0x51c882=_0x1a1a05;if(!this['_echartsInstance'])return;this['_echartsContainer']['style'][_0x51c882(0x1a3)]=this['_map']['scene']['canvas'][_0x51c882(0x1c6)]+'px',this['_echartsContainer']['style']['height']=this[_0x51c882(_0xa6b127._0x3cfcde)]['scene']['canvas'][_0x51c882(0x1d4)]+'px',this[_0x51c882(_0xa6b127._0x253c66)][_0x51c882(0x1cd)]();}['setEchartsOption'](_0x3bd0f0,_0xcb9c11,_0x2159e9){const _0x238e7f=_0x1a1a05;this['_echartsInstance']&&(_0x3bd0f0={'mars3dMap':{},...mars3d__namespace['Util']['getAttrVal'](_0x3bd0f0,{'onlySimpleType':!![]})},delete _0x3bd0f0[_0x238e7f(0x1bc)],this['_echartsInstance']['setOption'](_0x3bd0f0,_0xcb9c11,_0x2159e9));}['getRectangle'](_0x1b454b){const _0x1ba399=_0x1a1a05;let _0x43ed41,_0x2e9365,_0x5ee6d8,_0x5af51f;function _0x3a8bc4(_0x4b38a6){if(!Array['isArray'](_0x4b38a6))return;const _0x5190db=_0x4b38a6[0x0]||0x0,_0x2a1750=_0x4b38a6[0x1]||0x0;_0x5190db!==0x0&&_0x2a1750!==0x0&&(_0x43ed41===undefined?(_0x43ed41=_0x5190db,_0x2e9365=_0x5190db,_0x5ee6d8=_0x2a1750,_0x5af51f=_0x2a1750):(_0x43ed41=Math['min'](_0x43ed41,_0x5190db),_0x2e9365=Math['max'](_0x2e9365,_0x5190db),_0x5ee6d8=Math['min'](_0x5ee6d8,_0x2a1750),_0x5af51f=Math['max'](_0x5af51f,_0x2a1750)));}const _0x34df98=this[_0x1ba399(0x1ba)]['series'];_0x34df98&&_0x34df98['forEach'](_0x3fee03=>{const _0x1b3997={_0x58f1ef:0x19a,_0x3190de:0x1ab};_0x3fee03['data']&&_0x3fee03['data']['forEach'](_0x399179=>{const _0x563118=_0x370c;if(_0x399179[_0x563118(_0x1b3997._0x58f1ef)])_0x3a8bc4(_0x399179['value']);else _0x399179[_0x563118(_0x1b3997._0x3190de)]&&_0x399179[_0x563118(0x1ab)]['forEach'](_0x21fdc9=>{_0x3a8bc4(_0x21fdc9);});});});if(_0x43ed41===0x0&&_0x5ee6d8===0x0&&_0x2e9365===0x0&&_0x5af51f===0x0)return null;return _0x1b454b!==null&&_0x1b454b!==void 0x0&&_0x1b454b['isFormat']?{'xmin':_0x43ed41,'xmax':_0x2e9365,'ymin':_0x5ee6d8,'ymax':_0x5af51f}:Cesium['Rectangle']['fromDegrees'](_0x43ed41,_0x5ee6d8,_0x2e9365,_0x5af51f);}['on'](_0x1543e1,_0x253575,_0xcb7b5b){const _0x181acc={_0x18c461:0x1d2},_0x2729a8=_0x1a1a05;return this[_0x2729a8(_0x181acc._0x18c461)]['on'](_0x1543e1,_0x253575,_0xcb7b5b||this),this;}[_0x1a1a05(0x1d6)](_0x5808c8,_0x29bd8f,_0x9197ab,_0x2a8c20){const _0x304015={_0x15b0f1:0x1d2},_0x1586f7=_0x1a1a05;return this[_0x1586f7(_0x304015._0x15b0f1)]['on'](_0x5808c8,_0x29bd8f,_0x9197ab,_0x2a8c20||this),this;}['off'](_0x43048a,_0x526026,_0x2437d8){const _0x56e919={_0x135c92:0x1d2},_0x23e988=_0x1a1a05;return this[_0x23e988(_0x56e919._0x135c92)]['off'](_0x43048a,_0x526026,_0x2437d8||this),this;}}mars3d__namespace['LayerUtil']['register'](_0x1a1a05(0x1ce),EchartsLayer),mars3d__namespace[_0x1a1a05(0x19f)]['EchartsLayer']=EchartsLayer,mars3d__namespace['echarts']=echarts__namespace,exports['EchartsLayer']=EchartsLayer,Object['keys'](echarts)[_0x1a1a05(0x1d3)](function(_0x46d232){if(_0x46d232!=='default'&&!exports['hasOwnProperty'](_0x46d232))Object['defineProperty'](exports,_0x46d232,{'enumerable':!![],'get':function(){return echarts[_0x46d232];}});}),Object['defineProperty'](exports,'__esModule',{'value':!![]});
}));
